/* =====================================================================
   LabelMine — Scoped Styles (refactored)
   - 이미지 600px 고정 + 포스트 350px 고정 (팝업 기본 폭: 950px)
   - 적용: <main class="labelmine-body"> ... </main>
===================================================================== */

/* =====================================================================
   0) VARIABLES & BASE (scoped)
===================================================================== */
.labelmine-body{
  /* Palette */
  --accent:#FFA765; --text:#111; --muted:#666; --bg:#FFFFFF;

  /* Radii */
  --r-sm:10px; --r-md:12px; --r-lg:16px; --r-full:9999px;

  /* Layout */
  --nav-h:64px;
  --STAGE-W:min(80vw, 1120px);
  --IM-W:600px;               /* 이미지 영역 */
  --POST-W:350px;             /* 포스트 패널 */
  --POP-W:calc(var(--IM-W) + var(--POST-W)); /* 950px */
  --TARGET-W:var(--IM-W);
  --post-nudge-x:0px;         /* POST 수평 미세이동 */

  /* SimpleDraw Toolbar */
  --TB-H:48px; --TB-ITEM:40px; --TB-PAD-V:4px; --TB-PAD-H:15px;

  /* Icon */
  --ico-arrow-left:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill='none' viewBox='0 0 24 24'%3E%3Cpath stroke='%23000' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M5 12h14M5 12l4-4m-4 4 4 4'/%3E%3C/svg%3E");

  /* Shadows / Rings */
  --ring:0 0 0 3px rgba(39,89,153,.18);
  --focus:0 0 0 3px rgba(39,89,153,.28);
  --shadow-1:0 8px 24px rgba(0,0,0,0.12);
  --shadow-2:0 12px 32px rgba(0,0,0,0.16);

  /* Split/Letterbox */
  --split-border:#e5e7eb;
  --letterbox:#f3f4f6;

  /* Edges */
  --edgeR:12px; /* 내부 버튼 우측 인셋 */

  /* Z-index scale */
  --z-nav:100;
  --z-toolbar:20;
  --z-modal:3400;
  --z-sdf:4200;
  --z-crop:6500;
  --z-close:6600;

  padding-bottom:50px;
  color:var(--text); background:var(--bg); min-width:475px;
  font-family:'Inter',-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif;
}

/* 변수 전파(모달이 body 아래로 붙는 경우 대비) */
body:has(.labelmine-body){
  --ico-arrow-left:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill='none' viewBox='0 0 24 24'%3E%3Cpath stroke='%23000' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M5 12h14M5 12l4-4m-4 4 4 4'/%3E%3C/svg%3E");
}

/* :has() 미지원 폴백(최소 전파) */
@supports not(selector(:has(*))){
  body{ --ico-arrow-left:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill='none' viewBox='0 0 24 24'%3E%3Cpath stroke='%23000' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M5 12h14M5 12l4-4m-4 4 4 4'/%3E%3C/svg%3E"); }
}

/* =====================================================================
   Base
===================================================================== */
*{ box-sizing:border-box; margin:0; padding:0; }
:root{ --accent:#FFA765; --nav-h:64px; --text:#111; --muted:#666; }
html,body{ height:100%; }
body{ font-family:'Inter',sans-serif; color:var(--text); background:#fff; min-width:400px; }

/* =====================================================================
   1) Nav
===================================================================== */
header.nav{ position:sticky; top:0; z-index:var(--z-nav); height:var(--nav-h); background:#fff; }
.nav-inner{ height:100%; display:flex; align-items:center; justify-content:space-between; padding:0 27px; }
.menu{ list-style:none; display:flex; gap:20px; }
.menu a{ color:#333; text-decoration:none; font-weight:500; font-size:15px; opacity:.9; transition:.2s; }
.menu a:hover{ opacity:1; color:#000; }
.menu a.active{ font-weight:600; color:#000; }
.logo-cta img{ width:27px; height:27px; object-fit:contain; }

/* =====================================================================
   2) HERO & STACK
===================================================================== */
.labelmine-body .hero{ max-width:960px; margin:0 auto; text-align:center; padding-top:60px; }
.labelmine-body .title{
  margin:8px 0 0; font-weight:600; color:#111; letter-spacing:-.04em; text-transform:uppercase; line-height:1.1;
  font-size:clamp(28px, 3.2vw, 40px);
}
.labelmine-body .subtitle{
  margin-top:5px; font-size:clamp(16px, 2.2vw, 24px); color:#888; font-weight:400;
}
.labelmine-body .stack{ max-width:960px; margin:0 auto; text-align:center; padding-top:30px; display:flex; flex-direction:column; align-items:center; gap:10px; }

/* =====================================================================
   3) CATEGORY & STARS
===================================================================== */
.labelmine-body .category-row{ display:inline-flex; gap:10px; align-items:center; justify-content:center; margin:8px 0 12px; }
.labelmine-body .pill{ display:inline-flex; height:29px; align-items:center; justify-content:center; background:#F4F4F4; border-radius:8px; padding:0 8px; }
.labelmine-body .pill__text{ font-weight:400; color:#666; font-size:18px; letter-spacing:-.02em; line-height:1.6; }
.labelmine-body .stars{ display:inline-flex; align-items:center; gap:0; height:29px; }
.labelmine-body .stars svg{ width:19px; height:19px; display:block; }
.labelmine-body .stars svg path{ stroke:#666; stroke-width:1.3; }

/* =====================================================================
   4) BODY BLOCKS
===================================================================== */
.labelmine-body .timestamp{ height:26px; width:100%; display:flex; align-items:center; justify-content:center; text-align:center; color:#999; font-size:16px; padding:0 8px; font-weight:400; }
.labelmine-body .heart{ display:flex; align-items:center; justify-content:center; gap:8px; margin-top:12px; color:#777; font-size:16px; user-select:none; }
.labelmine-body .heart button{ display:inline-flex; align-items:center; justify-content:center; width:44px; height:44px; background:none; border:0; padding:0; cursor:pointer; }
.labelmine-body .heart svg{ width:24px; height:24px; display:block; }
.labelmine-body .heart.is-disabled{ cursor:default; opacity:.7; }
.labelmine-body .container{ display:flex; flex-direction:column; align-items:center; justify-content:flex-start; gap:30px; }
.labelmine-body .labelmine-gallery-box{ width:300px; height:300px; background:transparent; border-radius:var(--r-lg); overflow:hidden; display:flex; align-items:center; justify-content:center; }
.labelmine-body .labelmine-gallery-box img{ width:100%; height:100%; display:block; object-fit:cover; transform:scale(2.1); transform-origin:center; }
.labelmine-body .labelmine-gallery-box.is-empty{ border:1px dashed #d9d9d9; border-radius:var(--r-lg); }

/* =====================================================================
   5) SIMPLE DRAW (Wrapper / Toolbar / Modal)
===================================================================== */
.labelmine-body .sdf-wrap{
  position:relative; width:var(--STAGE-W); height:560px; margin:0 auto;
  overflow:hidden; touch-action:none; overscroll-behavior:none;
  border-radius:8px; border:1px solid #e5e7eb; background:#fff;
}
.labelmine-body .sdf-screen{
  position:absolute; inset:0; border:0; border-radius:0; background:transparent;
  user-select:none; -webkit-user-select:none; -webkit-touch-callout:none;
  touch-action:none; overscroll-behavior:none;
}

/* Import / Save Buttons */
.labelmine-body #sdf-import-btn,
.labelmine-body .sdf-import-btn{
  position:absolute; inset-inline-start:12px; top:12px; z-index:40; width:40px; height:40px;
  display:grid; place-items:center; background:#fff; border:1px solid #e5e7eb; border-radius:20px;
  box-shadow:0 4px 10px rgba(0,0,0,0.1); cursor:pointer;
}
.labelmine-body .sdf-import-btn svg{ width:calc(var(--TB-ITEM,40px)*0.6); height:calc(var(--TB-ITEM,40px)*0.6); display:block; }
.labelmine-body .sdf-top-right{ position:absolute; top:12px; inset-inline-end:var(--edgeR); display:flex; gap:8px; align-items:center; z-index:30; }
.labelmine-body .sdf-reset-btn,
.labelmine-body .sdf-save-btn{
  min-width:70px; height:40px; border:none; border-radius:12px; padding:0 18px;
  font-size:14px; font-weight:600; cursor:pointer; background:#E0E0E0; color:#000;
  box-shadow:0 4px 10px rgba(0,0,0,0.1);
}
.labelmine-body .sdf-save-btn.is-active,
.labelmine-body .sdf-reset-btn.is-active{ background:#FF884D; color:#fff; }

/* Toolbar */
.labelmine-body .sdf-toolbar{ position:absolute; left:50%; bottom:16px; transform:translateX(-50%); z-index:var(--z-toolbar); height:var(--TB-H); touch-action:none; }
.labelmine-body .sdf-toolbar.is-floating{ transform:none; }
.labelmine-body .sdf-toolbar-inner{
  display:flex; align-items:center; gap:0; height:var(--TB-H);
  padding:var(--TB-PAD-V) var(--TB-PAD-H) var(--TB-PAD-V) 0;
  border:1px solid #e5e7eb; border-radius:var(--r-full); background:#fff;
  box-shadow:0 6px 14px rgba(0,0,0,0.08);
  transition:padding 160ms ease, width 160ms ease, gap 160ms ease, border-radius 160ms ease;
  width:300px; overflow:hidden;
}
.labelmine-body .sdf-toolbar.is-collapsed .sdf-toolbar-inner{ width:var(--TB-H); padding:0; border-radius:50%; }
.labelmine-body .sdf-handle{ width:var(--TB-H); height:var(--TB-H); display:flex; flex-direction:column; gap:3px; align-items:center; justify-content:center; cursor:grab; flex:0 0 auto; user-select:none; border:0; background:transparent; }
.labelmine-body .sdf-dot{ width:4px; height:4px; border-radius:50%; background:#d1d5db; display:block; }
.labelmine-body .sdf-tools{ display:flex; align-items:center; gap:6px; height:calc(var(--TB-H) - var(--TB-PAD-V) * 2); overflow:hidden; }
.labelmine-body .sdf-divider{ width:1px; height:24px; background:#e5e7eb; margin:0 4px; }
.labelmine-body .sdf-circle-btn{ width:var(--TB-ITEM); height:var(--TB-ITEM); display:grid; place-items:center; border:1px solid #e5e7eb; border-radius:var(--r-full); background:#f9fafb; }
.labelmine-body .sdf-circle-btn.is-active{ background:#fff; box-shadow:0 1px 2px rgba(0,0,0,0.08); }

/* 5-1) Color Picker */
:where(.labelmine-body, body:has(.labelmine-body)) .sdf-color-panel{
  position:fixed; left:var(--pop-x,50%); top:var(--pop-y,50%); transform:translate(-50%,0);
  background:#fff; border:1px solid #e5e7eb; border-radius:12px;
  box-shadow:0 12px 24px rgba(0,0,0,.18);
  padding:12px; z-index:calc(var(--z-modal) + 1200); display:flex; flex-direction:column; gap:10px;
}
:where(.labelmine-body, body:has(.labelmine-body)) .sdf-color-btn{
  width:40px; height:40px; display:grid; place-items:center; cursor:pointer;
  border:1px solid #e5e7eb; border-radius:var(--r-full); background:#fff;
}
:where(.labelmine-body, body:has(.labelmine-body)) .sdf-color-btn:focus-visible{ outline:none; box-shadow:var(--focus); }
:where(.labelmine-body, body:has(.labelmine-body)) .sdf-color-btn .sdf-color-ico{ display:grid; place-items:center; }
:where(.labelmine-body, body:has(.labelmine-body)) .sdf-color-btn svg{ width:20px; height:20px; display:block; }
:where(.labelmine-body, body:has(.labelmine-body)) .sdf-color-chip{ width:22px; height:22px; border:1px solid rgba(0,0,0,.08); border-radius:var(--r-full); box-shadow:inset 0 1px 0 rgba(0,0,0,.04); }
:where(.labelmine-body, body:has(.labelmine-body)) .sdf-color-keys{ display:flex; align-items:center; gap:6px; margin-inline-start:6px; }

/* 밝기 슬라이더 */
:where(.labelmine-body, body:has(.labelmine-body)) .sdf-brightness{
  width:100%; height:10px; border-radius:var(--r-full); -webkit-appearance:none; appearance:none; outline:none;
  background:linear-gradient(to right,#000,#fff);
}
:where(.labelmine-body, body:has(.labelmine-body)) .sdf-brightness::-webkit-slider-thumb{
  -webkit-appearance:none; width:14px; height:14px; border-radius:50%;
  background:#111; box-shadow:0 0 0 3px #fff, 0 1px 0 rgba(0,0,0,.1); cursor:pointer;
}
:where(.labelmine-body, body:has(.labelmine-body)) .sdf-brightness::-moz-range-track{ height:6px; border-radius:var(--r-full); background:transparent; }
:where(.labelmine-body, body:has(.labelmine-body)) .sdf-brightness::-moz-range-thumb{
  width:14px; height:14px; border:0; border-radius:50%;
  background:#111; box-shadow:0 0 0 3px #fff, 0 1px 0 rgba(0,0,0,.1); cursor:pointer;
}

/* 컬러/여백 UI */
:where(.labelmine-body, body:has(.labelmine-body)) .im-group{ font-size:15px; font-weight:500; margin:8px 0 8px; }
:where(.labelmine-body, body:has(.labelmine-body)) .im-row{ display:flex; align-items:center; gap:10px; padding:4px 0; }
:where(.labelmine-body, body:has(.labelmine-body)) .im-kv{ margin-inline-start:auto; font-size:12px; color:#9aa0a6; }
:where(.labelmine-body, body:has(.labelmine-body)) .im-margin{
  width:100%; height:10px; border-radius:var(--r-full); -webkit-appearance:none; appearance:none; outline:none;
  background:linear-gradient(to right, rgba(17,17,17,.06), rgba(17,17,17,.9));
}
:where(.labelmine-body, body:has(.labelmine-body)) .im-margin::-webkit-slider-thumb{
  -webkit-appearance:none; width:14px; height:14px; border-radius:50%;
  background:#111; box-shadow:0 0 0 3px #fff, 0 1px 0 rgba(0,0,0,.1); cursor:pointer;
}
:where(.labelmine-body, body:has(.labelmine-body)) .im-margin::-moz-range-track{ height:6px; border-radius:var(--r-full); background:transparent; }
:where(.labelmine-body, body:has(.labelmine-body)) .im-margin::-moz-range-thumb{
  width:14px; height:14px; border:0; border-radius:50%;
  background:#111; box-shadow:0 0 0 3px #fff, 0 1px 0 rgba(0,0,0,.1); cursor:pointer;
}

/* 미리보기 컨테이너 */
.labelmine-body .fc-preview{ box-sizing:border-box; overflow:hidden; }

/* 색상 행 */
:where(.labelmine-body, body:has(.labelmine-body)) .im-row-color{ display:flex; align-items:center; gap:8px; flex-wrap:nowrap; padding:4px 0; }
:where(.labelmine-body, body:has(.labelmine-body)) .im-row-color .sdf-color-keys{
  display:flex; align-items:center; gap:8px; flex-wrap:nowrap; position:relative; padding-inline-start:10px;
}
:where(.labelmine-body, body:has(.labelmine-body)) .im-row-color .sdf-color-keys::before{
  content:""; position:absolute; inset-inline-start:0; top:50%; transform:translateY(-50%);
  width:1px; height:26px; background:var(--split-border, #e5e7eb); border-radius:1px;
}
:where(.labelmine-body, body:has(.labelmine-body)) .im-row-color .sdf-color-btn{ flex:0 0 auto; }

/* =====================================================================
   6) SIMPLE DRAW — Legacy modal (asset picker)
===================================================================== */
:where(.labelmine-body, body:has(.labelmine-body)) .sdf-modal-backdrop{
  position:fixed; inset:0; background:rgba(0,0,0,.45);
  display:grid; place-items:center; z-index:var(--z-sdf);
}
:where(.labelmine-body, body:has(.labelmine-body)) .sdf-modal{
  width:600px; height:645px; background:#fff; border-radius:25px;
  box-shadow:0 20px 60px rgba(0,0,0,.35);
  display:grid; grid-template-rows:45px 1fr; overflow:hidden; padding:0; gap:0; isolation:isolate;
}
:where(.labelmine-body, body:has(.labelmine-body)) .sdf-modal-head{
  display:grid; grid-template-columns:45px 1fr 45px; align-items:center;
  border-bottom:1px solid #e5e7eb; position:relative; height:45px; margin:0; padding:0;
}
:where(.labelmine-body, body:has(.labelmine-body)) .sdf-modal-title{
  position:absolute; left:50%; transform:translateX(-50%); width:max-content; text-align:center; font-weight:700; letter-spacing:.01em; font-size:17px;
}
:where(.labelmine-body, body:has(.labelmine-body)) .sdf-modal .sdf-modal-close{ display:none !important; }
:where(.labelmine-body, body:has(.labelmine-body)) .sdf-modal-body{ overflow:auto; padding:12px; min-height:0; position:relative; }
:where(.labelmine-body, body:has(.labelmine-body)) .sdf-empty{ color:#6b7280; padding:24px; text-align:center; }
:where(.labelmine-body, body:has(.labelmine-body)) .sdf-empty.is-center{
  position:absolute; inset:0; display:flex; align-items:center; justify-content:center; text-align:center; pointer-events:none; color:var(--muted); font-weight:500;
}
:where(.labelmine-body, body:has(.labelmine-body)) .sdf-grid{ display:grid; grid-template-columns:repeat(2, minmax(0,1fr)); gap:12px; }
:where(.labelmine-body, body:has(.labelmine-body)) .sdf-grid > button{
  border:1px solid #e5e7eb; border-radius:12px; background:#fff; padding:6px;
  cursor:pointer; display:flex; flex-direction:column; gap:6px; text-align:left; overflow:hidden;
}
:where(.labelmine-body, body:has(.labelmine-body)) .sdf-grid > button:hover{ outline:2px solid rgba(39,89,153,.18); }
:where(.labelmine-body, body:has(.labelmine-body)) .sdf-grid > button:focus-visible{ outline:2px solid rgba(39,89,153,.38); outline-offset:2px; }
:where(.labelmine-body, body:has(.labelmine-body)) .sdf-grid img{ width:100%; height:140px; object-fit:cover; border-radius:8px; display:block; }

/* =====================================================================
   GLOBAL — Modal Close(X) 통합
===================================================================== */
:root { --lm-x-z:2147483646; } /* 유지: 외부 요소와 충돌 방지 최후수단 */
.imodal-backdrop .im-head-close,
.cmodal-backdrop .im-head-close,
.sdf-modal-backdrop .im-head-close{
  position:fixed !important; top:calc(16px + env(safe-area-inset-top,0px)) !important;
  inset-inline-end:calc(16px + env(safe-area-inset-right,0px)) !important; z-index:var(--z-close) !important;
  width:36px; height:36px; display:grid; place-items:center;
  background:#fff; border:1px solid #e5e7eb; border-radius:var(--r-full);
  cursor:pointer; pointer-events:auto; box-shadow:0 2px 8px rgba(0,0,0,.08);
}
.imodal-backdrop .im-head-close .im-x,
.cmodal-backdrop .im-head-close .im-x,
.sdf-modal-backdrop .im-head-close .im-x{ position:relative; width:14px; height:14px; }
.imodal-backdrop .im-head-close .im-x::before,
.imodal-backdrop .im-head-close .im-x::after,
.cmodal-backdrop .im-head-close .im-x::before,
.cmodal-backdrop .im-head-close .im-x::after,
.sdf-modal-backdrop .im-head-close .im-x::before,
.sdf-modal-backdrop .im-head-close .im-x::after{
  content:""; position:absolute; left:6px; top:-1px; width:2px; height:16px; background:#111; border-radius:2px;
}
.imodal-backdrop .im-head-close .im-x::before,
.cmodal-backdrop .im-head-close .im-x::before,
.sdf-modal-backdrop .im-head-close .im-x::before{ transform:rotate(45deg); }
.imodal-backdrop .im-head-close .im-x::after,
.cmodal-backdrop .im-head-close .im-x::after,
.sdf-modal-backdrop .im-head-close .im-x::after{ transform:rotate(-45deg); }
.imodal-backdrop .im-head-close:focus-visible,
.cmodal-backdrop .im-head-close:focus-visible,
.sdf-modal-backdrop .im-head-close:focus-visible{ outline:none; box-shadow:0 0 0 3px rgba(0,0,0,.06); }
.cmodal-backdrop ~ .imodal-backdrop .im-head-close{ display:none !important; }

/* =====================================================================
   7) GALLERY — Horizontal rail
===================================================================== */
.labelmine-body .gh-outer{ width:var(--STAGE-W); max-width:var(--STAGE-W); padding:8px 0; margin:0 auto; overflow:hidden; }
.labelmine-body .gh-rail{ display:flex; gap:14px; overflow-x:auto; overflow-y:hidden; padding-bottom:4px; scroll-snap-type:x proximity; -webkit-overflow-scrolling:touch; contain:layout paint; overscroll-behavior-x:contain; }
.labelmine-body .gh-card{
  position:relative; flex:0 0 auto; width:280px; border:1px solid #e5e7eb; border-radius:14px; background:#fff; padding:8px; scroll-snap-align:start;
}
.labelmine-body .gh-thumb{ width:100%; height:180px; object-fit:cover; border-radius:10px; display:block; user-select:none; }
.labelmine-body .gh-deleteBtn,
.labelmine-body .gh-downloadBtn{
  position:absolute; top:10px; width:35px; height:35px; border:1px solid #e5e7eb; border-radius:var(--r-full); background:#fff;
  display:grid; place-items:center; box-shadow:0 3px 3px rgba(0,0,0,0.05); cursor:pointer;
  transition:opacity 140ms ease; opacity:0; pointer-events:none;
}
.labelmine-body .gh-deleteBtn{ inset-inline-start:10px; }
.labelmine-body .gh-downloadBtn{ inset-inline-end:10px; }
.labelmine-body .gh-dateBadge{
  position:absolute; top:10px; inset-inline-start:50%; transform:translateX(-50%);
  padding:6px 10px; background:#fff; font-size:11px; letter-spacing:.02em; color:#6b7280;
  transition:opacity 140ms ease; pointer-events:none; opacity:0;
}
.labelmine-body .gh-card:hover :is(.gh-deleteBtn,.gh-downloadBtn,.gh-dateBadge),
.labelmine-body .gh-card.isTouch :is(.gh-deleteBtn,.gh-downloadBtn,.gh-dateBadge){ opacity:1; pointer-events:auto; }
.labelmine-body .gh-empty{ flex:0 0 auto; padding:40px 20px; }
.labelmine-body .gh-icon, .labelmine-body .gh-icon--trash{ display:block; width:18px; height:18px; }

/* =====================================================================
   8) RESPONSIVE (stage/tooling)
===================================================================== */
@media (max-width:1199px) and (min-width:625px){
  .labelmine-body{ --STAGE-W:88vw; }
  .labelmine-body .sdf-wrap{ height:520px; }
}
@media (max-width:624px){
  .labelmine-body{ --STAGE-W:92vw; }
  .labelmine-body .sdf-wrap{ height:440px; }
  .labelmine-body .sdf-toolbar{ bottom:10px; }
  .labelmine-body .sdf-toolbar-inner{ width:240px; }
  .labelmine-body .gh-thumb{ height:150px; }
}

/* =====================================================================
   9) FEED COMPOSER (inline card)
===================================================================== */
.labelmine-body .feed-composer{
  width:var(--STAGE-W); max-width:var(--STAGE-W);
  background:#fff; border:1px solid #e5e7eb; border-radius:14px;
  padding:14px; box-shadow:0 6px 14px rgba(0,0,0,.06); margin:8px auto 0;
}
.labelmine-body .feed-composer__row{ display:flex; gap:12px; align-items:flex-start; }
.labelmine-body #fc-text{
  flex:1; min-height:96px; resize:vertical; padding:12px; border-radius:10px; border:1px solid #e5e7eb;
  font-size:14px; line-height:1.5; color:var(--text); background:#fff; outline:none;
}
.labelmine-body #fc-text::placeholder{ color:#9aa0a6; }
.labelmine-body #fc-text:focus{ border-color:#cfd8e3; box-shadow:0 0 0 3px rgba(255,167,101,.18); }
.labelmine-body .fc-actions{ display:flex; gap:8px; align-items:center; justify-content:flex-end; margin-top:10px; }
.labelmine-body .file-pill{ display:inline-flex; align-items:center; gap:8px; border:1px dashed #cfd3d6; padding:8px 12px; border-radius:var(--r-full); background:#fff; cursor:pointer; font-weight:600; color:#333; }
.labelmine-body .file-pill .hint{ font-size:12px; color:#666; margin-inline-start:6px; }
.labelmine-body #fc-file{ display:none; }
.labelmine-body .btn{ border-radius:var(--r-full); border:1px solid #cfd3d6; background:#fff; padding:9px 14px; font-weight:600; cursor:pointer; }
.labelmine-body .btn[disabled]{ opacity:.6; pointer-events:none; }
.labelmine-body .btn-primary{ background:#2A5F5F; color:#fff; border:none; padding:10px 18px; }
#feed-toast, .labelmine-body .feed-toast{
  position:fixed; left:50%; bottom:24px; transform:translateX(-50%);
  background:#111; color:#fff; padding:10px 14px; border-radius:12px; font-size:13px;
  opacity:0; pointer-events:none; transition:opacity .2s; z-index:9999;
}
#feed-toast.is-in, .labelmine-body .feed-toast.is-in{ opacity:1; }

/* =====================================================================
   10) FEED COMPOSER — Split layout (IM 600 + POST 350)
===================================================================== */
.labelmine-body .feed-composer.feed-composer--split{ padding:16px; }
.labelmine-body .feed-composer.feed-composer--split .fc-split{ display:grid; grid-template-columns:var(--IM-W) var(--POST-W); gap:16px 0; align-items:stretch; }
.labelmine-body .feed-composer.feed-composer--split .fc-left,
.labelmine-body .feed-composer.feed-composer--split .fc-right{ min-width:0; }
.labelmine-body .feed-composer.feed-composer--split .fc-right{ box-sizing:border-box; display:grid; grid-auto-rows:max-content; gap:10px; border-inline-start:1px solid var(--split-border); padding-inline-start:12px; }
.labelmine-body .fc-preview{
  width:100%; min-height:280px; border:1px solid #e5e7eb; border-radius:12px; background:#f8fafc;
  display:grid; place-items:center; overflow:hidden;
}
.labelmine-body .fc-preview img{ max-width:100%; height:auto; display:block; }
.labelmine-body .fc-placeholder{ color:#9aa0a6; font-size:13px; }
.labelmine-body .feed-composer.feed-composer--split #fc-text{ min-height:220px; }
.labelmine-body .feed-composer.feed-composer--split .fc-actions{ margin-top:12px; justify-content:flex-end; }

/* =====================================================================
   11) POST BUTTON & ACTION BAR
===================================================================== */
.labelmine-body .sdf-actionbar{ display:flex; justify-content:flex-end; align-items:center; gap:8px; width:var(--STAGE-W) !important; margin:0 auto 10px !important; padding-inline-end:0; }
.labelmine-body .feed-open-btn{
  width:86px; height:44px; padding:0 18px; border:1px solid #e5e7eb; border-radius:14px; background:#111; color:#fff; font-weight:700; letter-spacing:.02em;
  cursor:pointer; box-shadow:0 8px 8px rgba(0,0,0,.18);
  transition:transform .08s ease, box-shadow .16s ease, opacity .16s ease, background .16s ease; -webkit-tap-highlight-color:transparent;
  transform:translateX(var(--post-nudge-x));
}
.labelmine-body .feed-open-btn:hover{ box-shadow:0 10px 22px rgba(0,0,0,.22); }
.labelmine-body .feed-open-btn:active{ transform:translateX(var(--post-nudge-x)) translateY(1px); box-shadow:0 6px 14px rgba(0,0,0,.16); }
.labelmine-body .feed-open-btn:focus-visible{ outline:none; box-shadow:0 0 0 3px rgba(0,0,0,.06), 0 0 0 6px rgba(255,167,101,.35); }

/* =====================================================================
   12) FEED MODAL — Compose (Step1: POP-W 고정)
===================================================================== */
:where(.labelmine-body, body:has(.labelmine-body)) .imodal-backdrop{
  position:fixed; inset:0; background:rgba(0,0,0,.45);
  display:grid; place-items:center; z-index:var(--z-modal);
}
:where(.labelmine-body, body:has(.labelmine-body)) .imodal{
  width:var(--POP-W); height:645px; background:#fff; border-radius:25px; box-shadow:0 20px 60px rgba(0,0,0,.35);
  display:grid; grid-template-rows:45px 1fr; overflow:hidden; isolation:isolate; --im-ar: 1 / 1; --im-fit: contain;
}
:where(.labelmine-body, body:has(.labelmine-body)) .im-head{
  position:relative; display:grid; grid-template-columns:45px 1fr 45px; align-items:center; border-bottom:1px solid #e5e7eb;
}
:where(.labelmine-body, body:has(.labelmine-body)) .im-head-title{
  position:absolute; left:50%; transform:translateX(-50%); font-size:17px; width:max-content; text-align:center; font-weight:700; letter-spacing:.01em;
}
:where(.labelmine-body, body:has(.labelmine-body)) .im-head-back{
  width:45px; height:45px; display:grid; place-items:center; border:0; background:transparent; cursor:pointer; position:relative; color:#111; grid-column:1/2;
}
:where(.labelmine-body, body:has(.labelmine-body)) .im-head-back::before{
  content:""; width:40px; height:40px; display:block; background-color:currentColor;
  -webkit-mask-image:var(--ico-arrow-left); mask-image:var(--ico-arrow-left);
  -webkit-mask-repeat:no-repeat; mask-repeat:no-repeat;
  -webkit-mask-position:center; mask-position:center;
  -webkit-mask-size:22px 22px; mask-size:22px 22px;
}
:where(.labelmine-body, body:has(.labelmine-body)) .im-head-back:focus-visible{ outline:none; box-shadow:0 0 0 3px rgba(0,0,0,.06); border-radius:var(--r-full); }
:where(.labelmine-body, body:has(.labelmine-body)) .feed-ico-back{ display:none !important; }

/* Share */
:where(.labelmine-body, body:has(.labelmine-body)) .im-head-share{
  justify-self:end; margin-inline-end:12px; font-size:15px; background:transparent !important; color:#0A66D1 !important;
  border:0; border-radius:0; min-width:0; height:auto; padding:0 8px; line-height:1; font-weight:500; cursor:pointer; grid-column:3/4;
}
:where(.labelmine-body, body:has(.labelmine-body)) .im-head-share[disabled]{ opacity:.45; cursor:default; }

/* Body: IM + POST */
:where(.labelmine-body, body:has(.labelmine-body)) .im-body{ display:grid; grid-template-columns:var(--IM-W) var(--POST-W); gap:16px 0; min-height:0; }
:where(.labelmine-body, body:has(.labelmine-body)) .im-left{ min-width:0; background:#fff; display:grid; align-items:stretch; justify-items:center; transition:background .2s ease; }

/* ★ im-stage */
:where(.labelmine-body, body:has(.labelmine-body)) .im-stage{
  position:relative;
  width:var(--IM-W)!important; max-width:var(--IM-W)!important;
  height:100%;
  display:flex; justify-content:center; align-items:center;
  background:#fff; margin:0 auto; overflow:hidden;
  border-radius:12px;
  box-sizing:border-box;
}
:where(.labelmine-body, body:has(.labelmine-body)) .im-stage img{
  display:block; width:auto; height:100%;
  object-fit: var(--im-fit, contain);
  max-width:none; max-height:none;
  transform-origin:50% 50%;
  transition:transform .1s ease-out;
  visibility:hidden; /* CLS 방지 */
  box-shadow:0 1px 0 rgba(0,0,0,0.04);
}
:where(.labelmine-body, body:has(.labelmine-body)) .im-stage.has-image img{ visibility:visible; }

:where(.labelmine-body, body:has(.labelmine-body)) .im-right{
  box-sizing:border-box; min-width:0; border-inline-start:1px solid var(--split-border); padding:12px;
  overflow:auto; display:grid; grid-auto-rows:max-content; gap:10px; background:#fff; -webkit-overflow-scrolling:touch; contain:layout paint;
}
:where(.labelmine-body, body:has(.labelmine-body)) .im-acct{ display:flex; align-items:center; gap:4px; }

/* 아바타 */
:where(.labelmine-body, body:has(.labelmine-body)) .im-acct-avatar{
  width:32px; height:32px; border-radius:50%;
  background:#ddd center/cover no-repeat;
  flex:0 0 32px; overflow:hidden;
}
:where(.labelmine-body, body:has(.labelmine-body)) .im-acct-avatar.has-img{ background-color:transparent; }
:where(.labelmine-body, body:has(.labelmine-body)) .im-acct-avatar img{
  width:100%; height:100%; display:block; object-fit:cover; border-radius:50%;
}
:where(.labelmine-body, body:has(.labelmine-body)) .im-acct-name{ margin-inline-start:4px; font-weight:600; }

:where(.labelmine-body, body:has(.labelmine-body)) .im-caption{
  box-sizing:border-box; width:100%; min-height:120px; resize:vertical; padding:12px 12px;
  border:1px solid #e6e6e6; border-radius:10px; outline:none;
  font:500 14px/1.5 ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans KR", sans-serif;
  color:var(--text); background:#fff;
}
:where(.labelmine-body, body:has(.labelmine-body)) .im-caption:focus{ box-shadow:var(--ring); border-color:transparent; }
:where(.labelmine-body, body:has(.labelmine-body)) .im-cap-meta{ display:flex; align-items:center; justify-content:space-between; color:#9aa0a6; font-size:12px; }
:where(.labelmine-body, body:has(.labelmine-body)) .im-attach{ display:flex; align-items:center; gap:8px; }
:where(.labelmine-body, body:has(.labelmine-body)) .feedc__attach{
  display:inline-flex; align-items:center; gap:8px; height:36px; padding:0 12px; border:1px solid #e5e7eb; border-radius:10px; cursor:pointer; background:#fff; color:#333; font-size:13px; font-weight:500;
}
:where(.labelmine-body, body:has(.labelmine-body)) .feedc__attach:hover{ background:#fafafa; }
:where(.labelmine-body, body:has(.labelmine-body)) .feedc__attach:active{ background:#f5f5f5; }
:where(.labelmine-body, body:has(.labelmine-body)) .feedc__file{
  position:absolute !important; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0;
}

/* =====================================================================
   13) CROP MODAL (step 2) — 600px
===================================================================== */
:where(.labelmine-body, body:has(.labelmine-body)) .cmodal-backdrop{
  position:fixed; inset:0; background:rgba(0,0,0,.45); display:grid; place-items:center; z-index:var(--z-crop);
}
:where(.labelmine-body, body:has(.labelmine-body)) .cmodal{
  width:var(--IM-W); height:645px; background:#fff; border-radius:25px; box-shadow:0 20px 60px rgba(0,0,0,.35);
  display:grid; grid-template-rows:45px 1fr; overflow:hidden; isolation:isolate; position:relative;
}
/* Header */
:where(.labelmine-body, body:has(.labelmine-body)) .cm-head{
  display:grid; grid-template-columns:45px 1fr 45px; align-items:center;
  border-bottom:1px solid #e5e7eb; position:relative;
}
:where(.labelmine-body, body:has(.labelmine-body)) .cm-title{
  position:absolute; left:50%; transform:translateX(-50%); font-size:17px;
  width:max-content; text-align:center; font-weight:700; letter-spacing:.01em;
}
:where(.labelmine-body, body:has(.labelmine-body)) .cm-back{
  width:45px; height:45px; display:grid; place-items:center; grid-column:1/2;
  border:0; background:transparent; cursor:pointer; position:relative; color:#111;
}
:where(.labelmine-body, body:has(.labelmine-body)) .cm-back::before{
  content:""; width:40px; height:40px; display:block; background-color:currentColor;
  -webkit-mask-image:var(--ico-arrow-left); mask-image:var(--ico-arrow-left);
  -webkit-mask-repeat:no-repeat; mask-repeat:no-repeat; -webkit-mask-position:center; mask-position:center;
  -webkit-mask-size:22px 22px; mask-size:22px 22px;
}
:where(.labelmine-body, body:has(.labelmine-body)) .cm-back:focus-visible{ outline:none; box-shadow:0 0 0 3px rgba(0,0,0,.06); border-radius:var(--r-full); }

/* Next */
:where(.labelmine-body, body:has(.labelmine-body)) .cm-next{
  justify-self:end; margin-inline-end:12px; grid-column:3/4; font-size:15px; background:transparent !important; color:#0A66D1 !important;
  border:0; border-radius:0; min-width:0; height:auto; padding:0 8px; line-height:1; font-weight:500; cursor:pointer;
}
:where(.labelmine-body, body:has(.labelmine-body)) .cm-next[disabled]{ opacity:.45; cursor:default; }
:where(.labelmine-body, body:has(.labelmine-body)) .cm-body{ background:#fff; display:grid; place-items:center; }

/* Stage */
:where(.labelmine-body, body:has(.labelmine-body)) .cm-stage{
  width:var(--IM-W) !important; height:600px; background:#fff; display:grid; place-items:center; margin:0 auto; position:relative; overflow:hidden;
}
:where(.labelmine-body, body:has(.labelmine-body)) .cm-stage img,
:where(.labelmine-body, body:has(.labelmine-body)) .cm-stage canvas{ max-width:100%; max-height:100%; display:block; }
:where(.labelmine-body, body:has(.labelmine-body)) .cm-stage canvas{ background:transparent; }

/* Step2(600px) → Step3(POP-W) 너비 모핑 */
@media (min-width:641px){
  :where(.labelmine-body, body:has(.labelmine-body)) .cmodal{ transition:width 280ms cubic-bezier(.2,.8,.2,1); will-change:width; }
  :where(.labelmine-body, body:has(.labelmine-body)) .cmodal.is-grow-to-compose{ width:var(--POP-W); }
}
@media (prefers-reduced-motion:reduce){
  :where(.labelmine-body, body:has(.labelmine-body)) .cmodal{ transition:none !important; }
}

/* =====================================================================
   13-1) CROP TOOLS — buttons + popovers
===================================================================== */
.crop-tools{ position:relative; display:flex; align-items:center; gap:12px; z-index:calc(var(--z-crop) + 100); }
.cm-stage{ position:relative; }

/* Buttons */
.crop-btn{
  width:40px; height:40px; border-radius:var(--r-full);
  display:grid; place-items:center; cursor:pointer;
  color:#fff; background:#3b3b3b;
  border:1px solid #e5e7eb;
  box-shadow:0 3px 16px rgba(0,0,0,.25);
  transition:background .15s ease, color .15s ease, box-shadow .15s ease, border-color .15s ease, filter .15s ease, opacity .15s ease;
}
.crop-btn.is-active{ background:#fff; color:#111; box-shadow:0 1px 2px rgba(0,0,0,0.08); }
.crop-btn.is-muted{
  background:#f2f2f2; color:#888; border-color:#e5e7eb;
  filter:saturate(.25) contrast(.95);
  opacity:.7; box-shadow:none;
}
@media (prefers-reduced-motion:reduce){
  .crop-btn.is-muted{ filter:none; }
}

/* Anchors */
.crop-btn[data-role="ratio"]{ position:absolute; inset-inline-start:16px; bottom:16px; }
.crop-btn[data-role="zoom"] { position:absolute; inset-inline-end:16px;  bottom:16px; }

/* Popovers */
.crop-pop{
  position:absolute; bottom:72px;
  background:#fff; color:#111;
  border:1px solid #e5e7eb; border-radius:12px;
  box-shadow:0 12px 24px rgba(0,0,0,.18);
  padding:10px; z-index:calc(var(--z-crop) + 110);
  transform-origin:bottom center; transform:translateY(6px) scale(.98);
  opacity:0; pointer-events:none; transition:opacity .16s, transform .16s;
}
.crop-pop.is-open{ opacity:1; pointer-events:auto; transform:translateY(0) scale(1); will-change:transform, opacity; }

/* Anchors by side */
.crop-menu{ inset-inline-start:16px; }
.crop-zoom{ inset-inline-end:16px; }

/* Menu items */
.crop-menu button{
  display:flex; align-items:center; justify-content:space-between; gap:10px;
  min-width:92px; padding:8px 10px;
  color:#111; background:transparent; border:0; border-radius:10px; cursor:pointer;
}
.crop-menu button:hover{ background:#f5f6f7; }

/* Zoom slider */
.crop-zoom input[type="range"]{
  width:220px; height:10px; border-radius:var(--r-full);
  -webkit-appearance:none; appearance:none; outline:none;
  background:#fff; border:1px solid #e5e7eb;
}
.crop-zoom input[type="range"]::-webkit-slider-thumb{
  -webkit-appearance:none; width:14px; height:14px; border-radius:50%;
  background:#111; box-shadow:0 0 0 3px #fff, 0 1px 0 rgba(0,0,0,.1); cursor:pointer;
}
.crop-zoom input[type="range"]::-moz-range-track{ height:6px; border-radius:var(--r-full); background:transparent; }
.crop-zoom input[type="range"]::-moz-range-thumb{
  width:14px; height:14px; border:0; border-radius:50%;
  background:#111; box-shadow:0 0 0 3px #fff, 0 1px 0 rgba(0,0,0,.1); cursor:pointer;
}

/* Overlay / Frame */
.crop-overlay{
  position:absolute; inset:0; pointer-events:none;
  opacity:0; transition:opacity .12s linear;
  background:
    linear-gradient(#0000 1px, #fff3 1px) 0 0/100% 33.333%,
    linear-gradient(90deg, #0000 1px, #fff3 1px) 0 0/33.333% 100%;
}
.crop-overlay.is-active{ opacity:1; }
.crop-frame{ position:absolute; border:0; border-radius:0; pointer-events:none; background:transparent; box-shadow:none; }

/* =====================================================================
   14) Canvas interaction (unified)
===================================================================== */
:where(.labelmine-body, body:has(.labelmine-body)) .cm-stage canvas{
  display:block; margin:0 auto; max-width:100%; max-height:100%; height:auto;
  touch-action:none; image-rendering:auto;
}

/* === 1:2 세로 이미지 레터박스 (Crop & Feed) === */
:where(.labelmine-body, body:has(.labelmine-body)) .cm-stage.is-ratio-12,
:where(.labelmine-body, body:has(.labelmine-body)) .im-stage.is-ratio-12{ position:relative; border-radius:0; }
:where(.labelmine-body, body:has(.labelmine-body)) .cm-stage.is-ratio-12::before,
:where(.labelmine-body, body:has(.labelmine-body)) .cm-stage.is-ratio-12::after,
:where(.labelmine-body, body:has(.labelmine-body)) .im-stage.is-ratio-12::before,
:where(.labelmine-body, body:has(.labelmine-body)) .im-stage.is-ratio-12::after{
  content:""; position:absolute; inset:0 auto 0 0; width:25%; background:var(--letterbox); pointer-events:none;
}
:where(.labelmine-body, body:has(.labelmine-body)) .cm-stage.is-ratio-12::after,
:where(.labelmine-body, body:has(.labelmine-body)) .im-stage.is-ratio-12::after{ inset-inline-start:auto; inset-inline-end:0; }
:where(.labelmine-body, body:has(.labelmine-body)) .im-stage.is-ratio-12 img{
  object-fit:contain; height:100%; width:auto; border-radius:0;
}

/* =====================================================================
   15) 공통 포커스 스타일 (접근성)
===================================================================== */
:where(.labelmine-body) :is(button,[role="button"],.sdf-circle-btn,.feedc__attach):focus-visible{
  outline:none; box-shadow:var(--focus);
}

/* =====================================================================
   16) 하이 콘트라스트 / 모션 감소 대응
===================================================================== */
@media (forced-colors: active){
  .crop-btn{ box-shadow:none; border:1px solid CanvasText; }
  .im-stage.is-ratio-12::before,
  .im-stage.is-ratio-12::after{ background:Canvas; }
}

/* =====================================================================
   17) 보조: 작은 타이포 최적화
===================================================================== */
.labelmine-body .title{ font-weight:700; }
.labelmine-body .subtitle{ font-weight:500; }
