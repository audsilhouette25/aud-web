/* =====================================================================
   0) Base & Tokens
===================================================================== */
* { box-sizing: border-box; margin: 0; padding: 0; }

:root{
  /* Brand & UI */
  --accent: #FFA765;            /* primary action 색 */
  --text: #111;                 /* 본문 텍스트 */
  --muted: #666;                /* 보조 텍스트 */
  --focus: #0B72FF;             /* 포커스 링 */

  /* Surfaces & Panels */
  --surface: #F5F5F5;           /* 페이지 배경 */
  --panel: #fff;                /* 카드/패널 배경 */
  --panel-radius: 18px;
  --shadow-soft: 0 1px 3px rgba(0,0,0,.05);

  /* Layout */
  --nav-h: 64px;
  --container-w: clamp(350px, 85vw, 1000px);
  --container-max: 1500px;      /* footer에서 사용 */
  --container-pad: 24px;        /* footer에서 사용 */

  /* Sheet geometry */
  --sheet-w-max: 1280px;

  /* Hero 배경(그라디언트 구분감 강화) */
  --green: #A9B9CF;
  --green-deep: #90A3BC;
}

html, body { height: 100%; }
body{
  font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  color: var(--text);
  background: var(--surface);
  min-width: 400px;
}

/* 접근성: 키보드 포커스 링 */
:where(a, button, [role="button"], input, select, textarea):focus-visible{
  outline: 2px solid var(--focus);
  outline-offset: 2px;
  border-radius: 8px;
}

/* =====================================================================
   1) Utilities
===================================================================== */
.container{ inline-size: var(--container-w); margin-inline: auto; }
.row{ display:flex; align-items:center; gap:.5rem; }
.row.between{ justify-content:space-between; }

/* =====================================================================
   2) Nav
===================================================================== */
header.nav {
  position: sticky; top: 0; z-index: 100;
  height: var(--nav-h);
  background: var(--surface);
}
.nav-inner {
  display: flex;
  align-items: center;
  justify-content: space-between;
  height: 100%;
  padding: 0 27px;
}

.menu {
  display: flex;
  gap: 20px;
  list-style: none;
}

.menu a {
  color: #333;
  text-decoration: none;
  letter-spacing: -.2px;
  font-size: 15px;
  font-weight: 500;
  opacity:.9;
  transition:opacity .2s,color .2s;
}

.menu a:hover {
  color: #000;
  opacity: 1;
}

.menu a.active {
  color: #000;
  font-weight: 600;
}

.logo-cta {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 27px;
  height: 27px;
  position: relative;
}

.logo-cta img {
  display: block;
  width: 27px;
  height: 27px;
  object-fit: contain;
}
.logo-cta::after {
  content: "MY";
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 12px;
  font-weight: 600;
  color: #fff;
  opacity: 0;
  transition: opacity .2s ease;
  pointer-events: none;
  white-space: nowrap;
}
.logo-cta:hover::after { opacity: 1; }

/* =====================================================================
   3) Profile Hero
===================================================================== */
.me{ inline-size: var(--container-w); margin: 0 auto 64px; }
.profile-hero{
  margin-top: 18px; padding: 20px 22px; border-radius: 22px;
  background: linear-gradient(180deg,
              color-mix(in oklab, var(--green) 90%, white 10%),
              var(--green-deep));
  color: #0d3800;
  display: flex; align-items: center; justify-content: space-between; gap: 20px;
}
.ph-left{ display: flex; align-items: center; gap: 16px; min-width: 0; }

/* =====================================================================
   4) Avatar (no inline styles) + Avatar Modal
===================================================================== */
.avatar{
  inline-size: 88px; block-size: 88px;
  border-radius: 22px;
  display: grid; place-items: center;
  font-weight: 700;
  position: relative; overflow: hidden;
  background: hsl(var(--h) 75% 85%);
  color: hsl(var(--h) 60% 28%);
  user-select: none;
  box-shadow: 0 6px 16px rgba(0,0,0,.08);
}
.avatar::after{
  content: attr(data-initials);
  font-size: 30px; line-height: 1; letter-spacing: .5px;
}
.avatar.url-mode{ background:#e9e9ec; color:transparent; }
.avatar.url-mode::after{ content:""; }

/* 24단계 Hue */
.avatar.h0  { --h:   0 } .avatar.h1  { --h:  15 } .avatar.h2  { --h:  30 }
.avatar.h3  { --h:  45 } .avatar.h4  { --h:  60 } .avatar.h5  { --h:  75 }
.avatar.h6  { --h:  90 } .avatar.h7  { --h: 105 } .avatar.h8  { --h: 120 }
.avatar.h9  { --h: 135 } .avatar.h10 { --h: 150 } .avatar.h11 { --h: 165 }
.avatar.h12 { --h: 180 } .avatar.h13 { --h: 195 } .avatar.h14 { --h: 210 }
.avatar.h15 { --h: 225 } .avatar.h16 { --h: 240 } .avatar.h17 { --h: 255 }
.avatar.h18 { --h: 270 } .avatar.h19 { --h: 285 } .avatar.h20 { --h: 300 }
.avatar.h21 { --h: 315 } .avatar.h22 { --h: 330 } .avatar.h23 { --h: 345 }

#me-avatar.avatar{ border-radius: 50%; overflow: hidden; }
#me-avatar.avatar .avatar-img{
  display:none; width:100%; height:100%; object-fit:cover;
}
#me-avatar.avatar.url-mode .avatar-img{ display:block; }
#me-avatar.avatar.url-mode::before{ content:""; }

/* Avatar Modal */
#avatar-modal .sheet{ inline-size: min(640px, 96vw); }

/* File input 스타일링 */
#avatar-modal #av-file{
  display: block;
  width: 100%;
  padding: 14px 16px;
  font-size: 14px;
  font-weight: 500;
  color: var(--text);
  background: #f8f8f8;
  border: none;
  border-radius: 12px;
  cursor: pointer;
  transition: background .2s;
}
#avatar-modal #av-file:hover{
  background: #f0f0f0;
}
#avatar-modal #av-file:focus{
  outline: none;
}
#avatar-modal #av-file::file-selector-button{
  padding: 8px 16px;
  margin-right: 12px;
  font-size: 13px;
  font-weight: 600;
  color: #111;
  background: var(--accent);
  border: none;
  border-radius: 9999px;
  cursor: pointer;
  transition: filter .2s;
}
#avatar-modal #av-file::file-selector-button:hover{
  filter: brightness(.95);
}

/* Cropper 영역 */
#avatar-modal .cropper{
  display:grid; place-items:center; margin:14px 0 10px;
}
#avatar-modal #av-canvas{
  display:block; margin-inline:auto; max-inline-size:100%;
  aspect-ratio: 1 / 1; block-size:auto;
  border-radius: 50%;
}

/* Zoom 슬라이더 스타일링 */
#avatar-modal #av-zoom{
  -webkit-appearance: none;
  appearance: none;
  width: 100%;
  height: 6px;
  background: #e0e0e0;
  border-radius: 9999px;
  outline: none;
  cursor: pointer;
}
#avatar-modal #av-zoom::-webkit-slider-thumb{
  -webkit-appearance: none;
  appearance: none;
  width: 18px;
  height: 18px;
  background: var(--accent);
  border-radius: 50%;
  cursor: pointer;
  box-shadow: 0 2px 6px rgba(0,0,0,.15);
  transition: transform .15s;
}
#avatar-modal #av-zoom::-webkit-slider-thumb:hover{
  transform: scale(1.1);
}
#avatar-modal #av-zoom::-moz-range-thumb{
  width: 18px;
  height: 18px;
  background: var(--accent);
  border: none;
  border-radius: 50%;
  cursor: pointer;
  box-shadow: 0 2px 6px rgba(0,0,0,.15);
}

/* Avatar Viewer (확대 보기) */
#avatar-viewer{
  position: fixed; inset: 0;
  display: grid; place-items: center;
  z-index: 1100;
  background: rgba(0,0,0,0);
  pointer-events: none; opacity: 0;
  transition: opacity .25s ease, background .25s ease;
}
#avatar-viewer.open{
  background: rgba(0,0,0,.85);
  pointer-events: auto; opacity: 1;
}
#avatar-viewer .overlay{
  position: fixed; inset: 0;
  background: transparent; border: 0;
  cursor: pointer;
}
#avatar-viewer .avatar-viewer-content{
  position: relative;
  z-index: 1;
  cursor: pointer;
}
#avatar-viewer #avatar-viewer-img{
  display: block;
  max-width: min(90vw, 500px);
  max-height: 80vh;
  border-radius: 50%;
  object-fit: cover;
  box-shadow: 0 8px 40px rgba(0,0,0,.4);
  transition: transform .3s ease;
}
#avatar-viewer.open #avatar-viewer-img{
  animation: avatarZoomIn .3s ease forwards;
}
@keyframes avatarZoomIn{
  from{ transform: scale(0.8); opacity: 0; }
  to{ transform: scale(1); opacity: 1; }
}

/* =====================================================================
   5) Typography blocks
===================================================================== */
.name-block{ min-width: 0; }
.display-name{ margin: 0; font-size: 28px; letter-spacing: -.2px; font-weight: 800; line-height: 1.1; }
.email{ margin: .25rem 0 0; color: #111; font-weight: 600; opacity: .9; }
.badge-line{ margin-top: 6px; }
.grade-badge{
  display: inline-block; padding: 6px 10px; border-radius: 9999px;
  font-weight: 700; font-size: 12px;
  background: #fff; color: #111;
  border: 1px solid rgba(0,0,0,.06); box-shadow: 0 1px 0 rgba(0,0,0,.04) inset;
}

/* =====================================================================
   6) Buttons
===================================================================== */
/* 공통 버튼 베이스 유지 */
.btn{
  appearance:none;border:1px solid rgba(0,0,0,.12);border-radius:9999px;
  padding:10px 16px;font-weight:700;line-height:1;cursor:pointer;
  background:#fff;color:#111;transition:transform .15s ease,box-shadow .15s ease,filter .15s ease,opacity .15s ease;
}
.btn:hover{ transform: translateY(-1px); box-shadow: 0 6px 16px rgba(0,0,0,.08); }
.btn[aria-busy="true"]{ opacity:.7; pointer-events:none; }

/* Danger 테마 */
.btn.danger{ background:#fef2f2; color:#b91c1c; border-color:rgba(220,38,38,.25); }
.btn.danger:hover{ background:#fee2e2; box-shadow:0 6px 16px rgba(220,38,38,.18); }
.btn.danger:active{ transform:translateY(1px); box-shadow:none; }

/* === 원형 아이콘 버튼 (inline SVG를 중앙에) === */
.btn.is-icon{
  inline-size:48px; block-size:48px; border-radius:50%; padding:0;
  display:inline-grid; place-items:center;         /* why: 정확한 중앙 정렬 */
  line-height:0;                                   /* 텍스트 라인박스 간섭 제거 */
}

/* JS가 넣는 <svg class="gh-icon ..."> 크기/정렬 고정 */
.btn.is-icon .gh-icon{
  width:22px; height:22px; display:block;          /* why: 인라인 공간/여백 제거 */
  /* stroke='currentColor' 가 JS SVG에 이미 있으므로 색상은 버튼 color를 따릅니다 */
}

/* 필요시 큰 사이즈 변형 */
.btn.is-icon.size-sm .gh-icon{ width:18px; height:18px; }
.btn.is-icon.size-lg{ inline-size:56px; block-size:56px; }
.btn.is-icon.size-lg .gh-icon{ width:24px; height:24px; }

/* 접근성 포커스 */
.btn.is-icon:focus{ outline:none; box-shadow:0 0 0 3px rgba(185,28,28,.25); }

/* (선택) 기존 클래스 매핑: .btn-delete -> .btn.danger.is-icon 로 통일 */
.btn-delete{ all: unset; } /* 과거 스타일 잔여물 무효화용(선택) */

/* =====================================================================
   Cards (shared): Collection / aud lab / Leaderboard 공용 스킨
   ※ KPI 스타일 제거와 무관하게 유지되어야 함
===================================================================== */
.panel{
  background: var(--panel);
  border-radius: var(--panel-radius);
  padding: 20px;
  box-shadow: var(--shadow-soft);
}
.panel h3{
  margin: 0 0 10px;
  font-size: 16px;
}

#admin-lab .card .btn { padding: 12px 18px; }
#admin-lab-msg{ margin-top: 8px; }

/* =====================================================================
   Leaderboard (ONLY) — 3 Columns Layout & Table Skin
   NOTE: 다른 섹션에는 영향 없음
===================================================================== */
/* 프로필 카드와 리더보드 사이 여백 */
.profile-hero + .insights{ margin-top: 20px; }
/* adminme.html 구조: section.insights > #lb-root > .panel* */
#lb-root{
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr)); /* 데스크탑: 3열 */
  gap: 16px;
  align-items: start;
}
@media (max-width: 795px){
  #lb-root{ grid-template-columns: 1fr; }
}
/* 카드 스킨(패널 톤 일치) */
.insights #lb-root .panel{
  background: #fff;
  border-radius: 18px;
  padding: 20px;
  box-shadow: 0 1px 3px rgba(0,0,0,.05);
  display: grid;
  grid-template-rows: auto 1fr auto; /* why: 높이 균일 */
  min-height: 140px;
}
.insights #lb-root .panel h3{
  margin: 0 0 10px;
  font-size: 16px;
  font-weight: 700;
  letter-spacing: -.01em;
}

/* 리더보드 표 */
.lb-grid table.lb{
  width: 100%;
  border-collapse: collapse;
  table-layout: auto;
  background: #fff;
  border-radius: 12px;
  overflow: hidden;
}
.lb-grid table.lb th,
.lb-grid table.lb td{
  border-bottom: 1px solid rgba(0,0,0,.08);
  padding: 10px 12px;
  vertical-align: middle;
  text-align: center;
  font-size: 14px;
}
/* Rank, Account 좌정렬 */
.lb-grid table.lb th:nth-child(1),
.lb-grid table.lb td:nth-child(1),
.lb-grid table.lb th:nth-child(2){
  text-align: center;
}
.lb-grid table.lb td:nth-child(2){
  text-align: left;
}
/* Rank 고정폭 + 숫자 정렬 */
.lb-grid table.lb th:nth-child(1),
.lb-grid table.lb td:nth-child(1){
  width: 64px;
  font-variant-numeric: tabular-nums;
}
.lb-grid table.lb th:nth-child(2),
.lb-grid table.lb td:nth-child(2){
  width: auto;
}
.lb-grid table.lb th:last-child,
.lb-grid table.lb td:last-child{
  width: 64px;
  white-space: nowrap;   /* 줄바꿈 방지 */
  /* padding-right는 그대로 두면 테두리와 적당히 떨어짐 */
}
/* 숫자 열: 자간 고정 */
.lb-grid table.lb td:nth-child(3),
.lb-grid table.lb td:nth-child(4),
.lb-grid table.lb td:nth-child(5),
.lb-grid table.lb td:nth-child(6){
  white-space: nowrap;
  font-variant-numeric: tabular-nums;
}
.lb-grid table.lb tbody tr:last-child td{ border-bottom: 0; }

/* 계정 셀(아바타 + 텍스트) */
.lb-grid .acc{
  display: flex;
  align-items: center;
  gap: 10px;
  min-width: 0;
}
.lb-grid .lb-avatar{
  width: 22px; height: 22px; border-radius: 50%;
  object-fit: cover; display: block; flex: 0 0 22px;
}
.lb-grid .acc > div{ min-width: 0; display: grid; gap: 2px; }
.lb-grid .acc > div > div{
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}
.lb-grid .muted{ opacity: .65; font-size: 12px; }

/* 로딩/에러 자리표시자(선택) */
.lb-grid .kpi-lg{ display: grid; place-items: center; min-height: 56px; font-weight: 700; }
.lb-grid .err{ color: #ff6b6b; }

/* =====================================================================
   9) Quick Panels (컬렉션 요약 등)
===================================================================== */
/* === Quick 영역 === */
.quick{
  margin-top: 18px;
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 30px;
}

/* 왼쪽 첫 패널(= Collection) */
.quick .panel:first-child{
  display: grid;
  align-content: center;
  padding-block: 24px;
}

/* 그리드 내용: 세로 가운데, 가로는 시작 정렬 */
.quick .panel:first-child .grid-2{
  display: grid;
  grid-template-columns: 1fr;  /* 한 컬럼 고정 */
  row-gap: 0;                  /* was 5px */
  column-gap: 0;
  justify-items: start;
  margin-top: 40px;
}

/* 숫자(KPI) 바로 아래 리스트는 촘촘하게 */
.quick .panel:first-child .grid-2 .kpi + .quick-list{
  margin-top: 2px; /* was 6px */
}

/* 리스트 다음에 나오는 다음 KPI 사이는 조금 띄우기(두 구간 경계) */
.quick .panel:first-child .grid-2 .quick-list + .kpi{
  margin-top: 14px; /* was 18px */
}

.quick .panel:first-child .grid-2 > *{ width: 100%; }
.quick .panel:first-child .quick-list{ padding-inline: 13px; }
.quick .panel:first-child .quick-list__ul{ margin: 0; padding: 0; }

/* KPI: 숫자 왼쪽, 라벨 오른쪽, 기준선(아래) 맞춤 */
.quick .panel:first-child .kpi{
  display: flex;
  flex-direction: column;  /* 숫자 위, 라벨 아래 */
  align-items: flex-start;
  gap: 6px;
}
.quick .panel:first-child .kpi b{
  font-size: 20px;
  line-height: 1;
}
.quick .panel:first-child .kpi span{
  font-size: 12px;
  line-height: 1;
  color: #777;
}

/* 기본 그리드 / KPI (다른 패널 공통) */
.grid-2{
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 16px;
}
.kpi{
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: 6px;
}

/* 리스트 공통 */
.panel .list{
  list-style: none;
  margin: 0;
  padding: 0;
  display: grid;
  gap: 10px;
}
.panel .list li{
  display: flex;
  align-items: center;
  justify-content: space-between;
  font-size: 14px;
}
.panel .list li b{
  font-variant-numeric: tabular-nums;
  color: #333;
}
/* === Quick Lists (labels / jibbitz) === */
.quick-list{ margin-top: 12px; }

.quick-list__ul{
  list-style: none;
  display: flex; flex-wrap: wrap; align-items: center;
  gap: 6px 10px; /* 줄 바꿈 시 위아래도 살짝 간격 */
  margin: 0; padding: 0;
}

.quick-list__li{
  display: inline-flex; align-items: center;
}

/* 이걸로 교체 */
.quick-list__li:not(:last-child)::after{
  content: " |";
  opacity: .45;
  margin-left: 7px;
}

/* 링크 룩앤필 */
.quick-list__link{
  text-decoration: none;
  font-weight: 600; font-size: 13px;
  color: #111;
}
.quick-list__link:hover{ text-decoration: underline; }


/* =====================================================================
   11) Modal (편집 모달)
===================================================================== */
.modal{
  position: fixed; inset: 0;
  display: grid; place-items: center;
  padding: 20px;
  background: rgba(0,0,0,.0);
  pointer-events: none; opacity: 0;
  transition: opacity .18s ease, background .18s ease;
}
.modal.open{
  background: rgba(0,0,0,.36);
  pointer-events: auto; opacity: 1;
}
.modal .sheet{
  inline-size: min(560px, 92vw);
  background: #fff; border-radius: 20px;
  box-shadow: 0 20px 60px rgba(0,0,0,.22);
  padding: 18px 18px 16px;
  transform: translateY(8px);
  transition: transform .18s ease, opacity .18s ease;
  opacity: .98;
}
.modal.open .sheet{ transform: translateY(0); opacity: 1; }
.modal .overlay{ position: fixed; inset: 0; background: transparent; border: 0; cursor: default; }
.modal .title{ font-size: 20px; font-weight: 800; margin: 2px 4px 14px; }
.form-row{ display: grid; gap: 6px; margin: 10px 4px; }
.form-row > label{ font-size: 13px; font-weight: 700; color: #222; }
.form-row > input{
  appearance: none; background:#fff;
  border: 1px solid rgba(0,0,0,.14); border-radius: 12px;
  padding: 12px 14px; font-size: 14px;
}
.form-row > input:focus-visible{ outline: 2px solid var(--focus); border-color: transparent; }
.hint{ font-size: 12px; color: var(--muted); margin: 4px 4px 0; }
.fieldset{
  border: 1px solid rgba(0,0,0,.08); border-radius: 14px;
  padding: 8px 10px 12px; margin: 12px 4px 8px;
}
.fieldset > legend{ padding: 0 6px; font-size: 12px; font-weight: 800; color: #333; }
.actions{
  display: flex; gap: 8px; justify-content: flex-end; align-items: center;
  margin: 14px 4px 0;
}
.msg{ font-size: 13px; color: #FFA765; margin: 10px 4px 0; min-height: 1.2em; }
@media (prefers-reduced-motion: reduce){
  .modal, .modal .sheet{ transition: none; }
}

/* =====================================================================
   12) Responsive (global)
===================================================================== */
@media (max-width: 795px){
  .insights{ grid-template-columns: 1fr; }
  .quick{ grid-template-columns: 1fr; }
  .profile-hero{ flex-direction: column; align-items: flex-start; }
  .ph-right{ align-self: stretch; }
}

/* =====================================================================
   13) Helpers
===================================================================== */
.sr-only{
  position: absolute !important; inline-size: 1px; block-size: 1px;
  padding: 0; margin: -1px; overflow: hidden;
  clip: rect(0, 0, 1px, 1px); white-space: nowrap; border: 0;
}

/* ===== Footer (compact) ===== */
.admin-footer{
  margin-top: 48px;
  padding: 24px 0 64px;
  border-top: 1px solid rgba(0,0,0,.06);
  background: transparent;
}

.admin-footer .footer-inner{
  max-width: var(--container-max, 1500px);
  padding: 0 var(--container-pad, 24px);
  margin: 0 auto;
  display: flex;
  justify-content: center;
  gap: 12px;                 /* 버튼 간격은 gap으로만 관리 */
}

/* 로그아웃 버튼 공통 스타일 */
.btn-logout{
  appearance: none;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0;
  min-width: 160px;
  padding: 12px 20px;
  line-height: 1;
  font-size: 15px;
  font-weight: 600;
  letter-spacing: .2px;
  border: 1px solid rgba(0,0,0,.14);
  border-radius: 9999px;
  background: #e9e9ec;
  color: #111;
  cursor: pointer;
  transition: background .18s ease, box-shadow .18s ease, transform .06s ease, color .18s ease, opacity .18s ease;
  box-shadow: 0 1px 2px rgba(0,0,0,.06);
}
.btn-logout:hover{ background: #dedee2; }
.btn-logout:focus{ outline: none; box-shadow: 0 0 0 3px rgba(255,167,101,.25); }
.btn-logout:active{ background: var(--accent); color:#111; transform: translateY(1px); }
.btn-logout[aria-busy="true"]{ background: var(--accent); color:#111; opacity: .95; pointer-events: none; }

/* 로그아웃 버튼: 폭 줄이기(푸터 범위 한정) */
.admin-footer .btn-logout{
  min-width: auto;           /* 고정폭 해제 */
  padding-inline: 18px;      /* 좌우 패딩 축소 */
  white-space: nowrap;       /* 한 줄 유지 */
}

/* === Avatar normalization (me) — 2025-09-22 === */
#me-avatar.avatar{ border-radius:50%; overflow:hidden; }
#me-avatar.avatar .avatar-img{ display:none; width:100%; height:100%; object-fit:cover; }
#me-avatar.avatar.url-mode .avatar-img{ display:block; }
#me-avatar.avatar.url-mode::before{ content:""; }

/* Lab layout next to Quick */
.lab-wrap{
  display: grid;
  grid-template-columns: 1fr min(640px, 55%);
  gap: 16px;
  align-items: stretch;
}
@media (max-width: 795px){
  .lab-wrap{ grid-template-columns: 1fr; }
}

/* Lab panel */
.panel.lab{
  display: grid;
  /* 가운데(캔버스) 행이 패딩을 제외한 남은 높이를 모두 차지 */
  grid-template-rows: auto minmax(0,1fr) auto;
  gap: 10px;
  padding: 20px;
  --lab-canvas-height: 360px;
}

.lab-head{
  display:flex; align-items:baseline; justify-content:space-between; gap:10px;
}
.lab-head h3{ font-size:16px; font-weight:700; }
.lab-stats{ color: var(--muted); font-size: 12px; }

/* 캔버스 래퍼: 그리드 남은 공간을 그대로 사용 */
.lab-canvas-wrap{
  position: relative;
  border-radius: 16px;
  background: #fff;
  box-shadow: inset 0 0 0 1px rgba(0,0,0,.05);
  overflow: hidden;
  width: 100%;
  height: var(--lab-canvas-height, 360px);
  min-height: var(--lab-canvas-height, 360px);
  display: flex;
  align-items: center;
  justify-content: center;
}

#aud-canvas{
  display: block;
  height: 100%;
  width: auto;
  max-width: none;
  touch-action: none;    /* 그리기용 포인터 이벤트 */
  background: #e6ebf3;   /* 기존 그라디언트의 가장 짙은 색상을 단색으로 사용 */
}

.lab-controls{
  display:flex; align-items:center; gap:8px;
}
.lab-controls .spacer{ flex:1; }

.panel.lab .btn.primary{
  background: var(--accent);
  color: #111;
  border: none;
}
.panel.lab .btn[disabled]{ opacity:.5; cursor:not-allowed; }

/* High-contrast focus for a11y */
#aud-canvas:focus-visible{ outline: 3px solid var(--focus); outline-offset: 2px; }

/* ★ 넓은 화면(≥1001px, .quick이 2열일 때) → Collection: 세로 1열 + 넓은 간격 */
@media (min-width: 796px){
  .quick > .panel:first-child{
    display: flex;
    flex-direction: column;
  }
  .quick > .panel:first-child .kpi{
    display: flex;
    align-items: baseline;
    justify-content: space-between;
    padding: 30px 14px;               /* 내부 여백 */
    background: transparent;
    gap: 15px;
  }
  .quick > .panel:first-child .kpi b{ font-size: 22px; }
  .quick > .panel:first-child .kpi span{ font-size: 13px; color: #777; }
}

/* ★ 좁은 화면(≤1000px) — quick 패널을 한 열로 스택 */
@media (max-width: 795px){
  .quick{
    grid-template-columns: 1fr;               /* 스택 */
  }
  .quick .panel:first-child .grid-2{
    margin-top: 10px;
  }
}

/* ===== admin aud-lab modal (full-page overlay) ===== */
/* file: public/css/adminme.css  (추가/교체) */

/* Base modal reset */
#admin-lab.modal{
  position: fixed;
  inset: 0;
  display: grid;
  place-items: center;
  justify-content: center;
  align-content: center;
  padding: 0;
  /* 기본은 비활성 상태로 시작 */
  opacity: 0;
  visibility: hidden;
  pointer-events: none;                  /* ← 닫힌 동안 클릭 차단(자기 자신) */
  z-index: -1;                           /* ← 스택에서 빼둠 */
  transition: opacity .18s ease, visibility 0s linear .18s;
  background: transparent; 
}

/* 열렸을 때만 상단으로 끌어올리고 상호작용 활성화 */
#admin-lab.modal.open,
#admin-lab.modal[aria-hidden="false"]{
  opacity: 1;
  visibility: visible;
  pointer-events: auto;                  /* ← 클릭 허용 */
  z-index: 1000;
  transition: opacity .18s ease;
  background: rgba(17,17,17,.35);
}

/* overlay/button 레이어도 닫힌 동안은 반드시 비활성화 */
#admin-lab.modal:not(.open)[aria-hidden="true"] .overlay,
#admin-lab.modal:not(.open)[aria-hidden="true"] *{
  pointer-events: none !important;       /* ← “가려진 차일드”가 클릭 먹는 것 방지 */
}

/* 시트 및 오버레이 기본 */
#admin-lab .overlay{
  position: fixed;
  inset: 0;
  background: transparent;
  z-index: 0;
}
#admin-lab .sheet{
  position: relative;
  max-width: var(--sheet-w-max, 960px);
  max-inline-size: var(--sheet-w-max, 960px);
  inline-size: clamp(0px, min(85vw, calc(100vw - 40px)), var(--sheet-w-max, 960px));
  width: clamp(0px, min(85vw, calc(100vw - 40px)), var(--sheet-w-max, 960px));
  max-height: 92dvh;
  border-radius: 16px;
  background: var(--panel, #fff);
  box-shadow: var(--shadow-soft, 0 10px 30px rgba(0,0,0,.15));
  overflow: auto;
  grid-area: 1 / 1;
  align-self: center;
  justify-self: center;
  z-index: 1;
  gap: 13px;
}

@media (max-width: 400px){
  #admin-lab .sheet{
    inline-size: 340px;
    width: 340px;
    max-inline-size: 340px;
    max-width: 340px;
  }
}

/* 나머지 카드/툴바 스타일 동일 */
#admin-lab .admin-toolbar { display:flex; align-items:center; gap:8px; margin:8px 0 14px; }
#admin-lab .admin-toolbar .spacer { flex:1; }
#admin-lab .nsbar { display:flex; flex-wrap:wrap; gap:6px; }
#admin-lab .admin-grid {
  display:grid;
  grid-template-columns:repeat(3, minmax(0, 1fr));
  gap:10px;
  align-items:stretch;
  justify-items:stretch;
}
@media (max-width: 795px){
  #admin-lab .admin-grid {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
}
@media (max-width: 505px){
  #admin-lab .admin-grid {
    grid-template-columns: 1fr;
  }
}
/* allow cards to shrink with the grid */
#admin-lab .admin-grid > .card {
  min-width: 0;
  width: 100%;
}
#admin-lab .card {
  position: relative;
  display: flex;
  flex-direction: column;
  gap: 15px;
  border:1px solid rgba(0,0,0,.08);
  border-radius:12px;
  padding:15px;
  background:#fff;
  block-size: 250px;
  height: 250px;
  box-sizing: border-box;
  cursor: pointer;
}
#admin-lab .card img { width:100%; height:100%; border-radius:12px; display:block; background:#f3f4f6; object-fit: cover; }
#admin-lab .card .meta {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  margin: 0;
  font-size: 12px;
  color: #6b7280;
  line-height: 1.3;
}
#admin-lab .card .status-pill {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto 0 0;
  padding: 4px 10px;
  border-radius: 999px;
  font-size: 11px;
  font-weight: 700;
  background: #eef2ff;
  color: #1e3a8a;
  border: 1px solid rgba(30,58,138,.12);
  width: fit-content;
}
#admin-lab .card .status-pill.status-developing {
  background: #fef3c7;
  color: #92400e;
  border-color: rgba(146,64,14,.16);
}
#admin-lab .card .status-pill.status-developed {
  background: #dcfce7;
  color: #166534;
  border-color: rgba(22,101,52,.18);
}
#admin-lab .card .meta,
#admin-lab .card .meta > * {
  min-width: 0;
}
#admin-lab .empty { color:#9ca3af; padding:24px; text-align:center; border:1px dashed #e5e7eb; border-radius:12px; }

.row--spaced { margin-top:6px; gap:6px; }

/* Admin Lab card: inner spacing & readable layout */
#admin-lab .card .preview-wrap{
  position: relative;
  width: 100%;
  flex: 1 1 auto;
  min-height: 0;
  min-width: 0;
  border-radius: 12px;
  overflow: hidden;
  background: #f3f4f6;
  display: flex;
  align-items: center;
  justify-content: center;
}
#admin-lab .card .preview-wrap img {
  display: block;
  width: 100%;
  height: 100%;
  object-fit: cover;
}

#admin-lab .card .meta .owner,
#admin-lab .card .meta .ns,
#admin-lab .card .meta .time {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

#admin-lab .card .card-footer{
  display:flex;
  justify-content:flex-end;
  align-items:center;
  margin-top:auto;
  padding-top: 8px;
  flex-shrink: 0;
}

#admin-lab .card .card-delete {
  margin: 0;
}

/* 터치 환경에서 조금 더 여유 */
@media (pointer: coarse) {
  #admin-lab .card .row--spaced { gap: 14px; margin-top: 12px; }
  #admin-lab .card .btn { padding: 12px 18px; }
}

#admin-lab .card .preview{
  width: 100%;
  aspect-ratio: 1 / 1;          /* 정사각형 */
  background-size: cover;
  background-position: center;
  border-radius: 12px;
  background-color: #111;        /* 이미지 로드 전 배경 */
}

/* file: /public/css/me.css (또는 공용 CSS) */
/* [5] ADD — 영구 규칙: 모달 컨트롤은 항상 인터랙션 가능 */
#admin-lab.modal .sheet,
#admin-lab.modal .admin-toolbar,
#admin-lab.modal .btn,
#admin-lab.modal button,
#admin-lab.modal [role="button"] {
  pointer-events: auto !important; /* why: 전역 reset/오버레이 규칙으로 none 되는 것 차단 */
}

/* adminme — delete icon button only */

/* 원형 버튼 컨테이너 */
.card .card-footer .card-delete{
  /* 사이즈/형태 */
  inline-size: 36px;
  block-size: 36px;
  border-radius: 50%;
  padding: 0;
  box-sizing: border-box;

  /* 중앙 정렬 기준 */
  position: relative;      /* why: 자식 svg 절대 중앙 기준점 */
  display: inline-grid;
  place-items: center;
  line-height: 0;          /* why: 라인박스 영향 제거 */

  /* 테마(위험) */
  background: #fef2f2;
  color: #b91c1c;          /* SVG stroke='currentColor' */
  border: 1px solid rgba(220,38,38,.25);
  box-shadow: 0 3px 6px rgba(220,38,38,.10);
  cursor: pointer;
  transition: background .18s ease, box-shadow .18s ease, transform .06s ease, opacity .18s ease;
}
.card .card-footer .card-delete:hover{
  background: #fee2e2;
  box-shadow: 0 6px 16px rgba(220,38,38,.18);
}
.card .card-footer .card-delete:active{
  transform: translateY(1px);
  box-shadow: none;
}
.card .card-footer .card-delete:focus{
  outline: none;
  box-shadow: 0 0 0 3px rgba(185,28,28,.25);
}

/* 아이콘 SVG를 기하학적 중앙으로 고정 */
.card .card-footer .card-delete > .gh-icon,
.card .card-footer .card-delete > svg{
  position: absolute;
  inset: 0;
  margin: auto;            /* 박스 자체를 정확히 중앙 */
  display: block;          /* 인라인 여백 제거 */
  width: 18px;
  height: 18px;
  pointer-events: none;
  /* 필요 시 미세 보정:
     transform: translateY(.5px);
  */
}
