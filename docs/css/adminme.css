/* =====================================================================
   0) Base & Tokens
===================================================================== */
* { box-sizing: border-box; margin: 0; padding: 0; }

:root{
  /* Brand & UI */
  --accent: #FFA765;            /* primary action 색 */
  --text: #111;                 /* 본문 텍스트 */
  --muted: #666;                /* 보조 텍스트 */
  --focus: #0B72FF;             /* 포커스 링 */
  --heart-red: #E53935;

  /* Surfaces & Panels */
  --surface: #F5F5F5;           /* 페이지 배경 */
  --panel: #fff;                /* 카드/패널 배경 */
  --panel-radius: 18px;
  --shadow-soft: 0 1px 3px rgba(0,0,0,.05);

  /* Notice metrics */
  --notice-h: 64px;             /* 알림 1개 기준 높이 */
  --notice-gap: 8px;            /* .notify-list gap */

  /* Layout */
  --nav-h: 64px;
  --container-w: clamp(350px, 85vw, 1000px);
  --container-max: 1500px;      /* footer에서 사용 */
  --container-pad: 24px;        /* footer에서 사용 */

  /* Quick/Feed spacing */
  --feed-top-gap: 32px;
  --feed-bottom-gap: 32px;

  /* Post Modal Layout tokens (PM) */
  --pm-gutter: 14px;
  --pm-left: 600px;             /* 좌측(미디어) 최대폭 */
  --pm-right: 350px;            /* 우측(텍스트) 고정폭 */
  --pm-left-min: 300px;         /* 세로 전환 임계 좌측폭 */
  --pm-lock-h: 350px;

  /* Sheet geometry */
  --sheet-w-max: 1280px;
  --sheet-ar-num: 16;
  --sheet-ar-den: 9;
  --pm-fixed-h: 92dvh;

  /* Hero 배경(그라디언트 구분감 강화) */
  --green: #A9B9CF;
  --green-deep: #90A3BC;

  /* Lab tokens (JS/HTML과 동기화) */
  --lab-head-h: 36px;
  --lab-controls-h: 52px;
  --lab-gap: 20px;

  /* Icons (data URI) */
  --ico-bell-off: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path fill='%237b8192' d='m20,8c2.206,0,4-1.794,4-4s-1.794-4-4-4-4,1.794-4,4,1.794,4,4,4Zm0-6c1.103,0,2,.897,2,2s-.897,2-2,2-2-.897-2-2,.897-2,2-2Zm3.272,14.247l-.005-.019s0,0,0-.001h0l-1.573-6.473c-.538.158-1.105.247-1.694.247-.104,0-.205-.01-.308-.016l1.637,6.735c.002.007.007.012.008.02h-.004c.082.308.021.615-.169.866-.192.255-.476.395-.796.395H3.493c-.305,0-.589-.137-.778-.371-.192-.24-.264-.548-.207-.812l2.352-9.117c.746-3.356,3.682-5.7,7.14-5.7.773,0,1.523.132,2.232.361.188-.661.484-1.275.872-1.821-.979-.348-2.025-.539-3.104-.539C7.598,0,3.859,2.988,2.916,7.233L.564,16.352c-.197.89.018,1.811.591,2.528.573.712,1.426,1.12,2.338,1.12h3.608c.465,2.279,2.484,4,4.899,4s4.434-1.721,4.899-4h3.47c.947,0,1.817-.433,2.39-1.186.556-.733.739-1.66.514-2.55-.001-.006,0-.011,0-.017Zm-11.272,5.753c-1.302,0-2.402-.839-2.816-2h5.631c-.414,1.161-1.514,2-2.816,2Z'/></svg>");
  --ico-bell-on:  url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path fill='%23FF884D' d='m23.63,16.862l-2.03-7.973c-.356.073-.723.111-1.1.111-.733,0-1.431-.147-2.072-.408l2.14,8.408H3.419l2.291-8.955c.66-2.971,3.247-5.045,6.29-5.045,1.076,0,2.105.27,3.013.748-.004-.083-.013-.164-.013-.248,0-.993.269-1.923.731-2.729-1.154-.498-2.419-.771-3.731-.771C7.54,0,3.75,3.041,2.793,7.348L.321,17.011c-.153.702.035,1.47.503,2.053.478.596,1.188.937,1.951.937h4.142c.563,2.293,2.617,4,5.084,4s4.521-1.707,5.084-4h4.128c.789,0,1.515-.36,1.99-.986.407-.535.562-1.193.472-1.846-.004-.101-.019-.204-.045-.306Zm-6.63-13.362c0-1.93,1.57-3.5,3.5-3.5s3.5,1.57,3.5,3.5-1.57,3.5-3.5,3.5-3.5-1.57-3.5-3.5Z'/></svg>");
  --notify-on: #FF884D;
}

html, body { height: 100%; }
body{
  font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  color: var(--text);
  background: var(--surface);
  min-width: 400px;
}

/* 접근성: 키보드 포커스 링 */
:where(a, button, [role="button"], input, select, textarea):focus-visible{
  outline: 2px solid var(--focus);
  outline-offset: 2px;
  border-radius: 8px;
}

/* =====================================================================
   1) Utilities
===================================================================== */
.container{ inline-size: var(--container-w); margin-inline: auto; }
.fullbleed{
  inline-size: 100vw;
  margin-left: calc(50% - 50vw);
  margin-right: calc(50% - 50vw);
}
.row{ display:flex; align-items:center; gap:.5rem; }
.row.between{ justify-content:space-between; }

/* =====================================================================
   2) Nav
===================================================================== */
header.nav{
  position: sticky; top: 0; z-index: 100;
  height: var(--nav-h);
  background: var(--surface);   
}
.nav-inner{
  height: 100%;
  display: flex; align-items: center; justify-content: space-between;
  padding: 0 27px;
}
.menu{ list-style: none; display: flex; gap: 20px; }
.menu a{
  color: #333; text-decoration: none;
  font-weight: 500; font-size: 15px;
  opacity: .9; transition: opacity .2s ease, color .2s ease;
}
.menu a:hover{ opacity: 1; color: #000; }
.menu a.active{ font-weight: 600; color: #000; }
.logo-cta img{ inline-size: 27px; block-size: 27px; object-fit: contain; }

/* =====================================================================
   3) Profile Hero
===================================================================== */
.me{ inline-size: var(--container-w); margin: 0 auto 64px; }
.profile-hero{
  margin-top: 18px; padding: 20px 22px; border-radius: 22px;
  background: linear-gradient(180deg,
              color-mix(in oklab, var(--green) 90%, white 10%),
              var(--green-deep));
  color: #0d3800;
  display: flex; align-items: center; justify-content: space-between; gap: 20px;
}
.ph-left{ display: flex; align-items: center; gap: 16px; min-width: 0; }

/* =====================================================================
   4) Avatar (no inline styles) + Avatar Modal
===================================================================== */
.avatar{
  inline-size: 88px; block-size: 88px;
  border-radius: 22px;
  display: grid; place-items: center;
  font-weight: 700;
  position: relative; overflow: hidden;
  background: hsl(var(--h) 75% 85%);
  color: hsl(var(--h) 60% 28%);
  user-select: none;
  box-shadow: 0 6px 16px rgba(0,0,0,.08);
}
.avatar::after{
  content: attr(data-initials);
  font-size: 30px; line-height: 1; letter-spacing: .5px;
}
.avatar.url-mode{ background:#e9e9ec; color:transparent; }
.avatar.url-mode::after{ content:""; }

/* 24단계 Hue */
.avatar.h0  { --h:   0 } .avatar.h1  { --h:  15 } .avatar.h2  { --h:  30 }
.avatar.h3  { --h:  45 } .avatar.h4  { --h:  60 } .avatar.h5  { --h:  75 }
.avatar.h6  { --h:  90 } .avatar.h7  { --h: 105 } .avatar.h8  { --h: 120 }
.avatar.h9  { --h: 135 } .avatar.h10 { --h: 150 } .avatar.h11 { --h: 165 }
.avatar.h12 { --h: 180 } .avatar.h13 { --h: 195 } .avatar.h14 { --h: 210 }
.avatar.h15 { --h: 225 } .avatar.h16 { --h: 240 } .avatar.h17 { --h: 255 }
.avatar.h18 { --h: 270 } .avatar.h19 { --h: 285 } .avatar.h20 { --h: 300 }
.avatar.h21 { --h: 315 } .avatar.h22 { --h: 330 } .avatar.h23 { --h: 345 }

#me-avatar.avatar{ border-radius: 50%; overflow: hidden; }
#me-avatar.avatar .avatar-img{
  display:none; width:100%; height:100%; object-fit:cover;
}
#me-avatar.avatar.url-mode .avatar-img{ display:block; }
#me-avatar.avatar.url-mode::before{ content:""; }

/* Avatar Modal */
#avatar-modal .sheet{ inline-size: min(640px, 96vw); }
#avatar-modal .cropper{
  display:grid; place-items:center; margin:14px 0 10px;
}
#avatar-modal #av-canvas{
  display:block; margin-inline:auto; max-inline-size:100%;
  aspect-ratio: 1 / 1; block-size:auto;
}

/* =====================================================================
   5) Typography blocks
===================================================================== */
.name-block{ min-width: 0; }
.display-name{ margin: 0; font-size: 28px; letter-spacing: -.2px; font-weight: 800; line-height: 1.1; }
.email{ margin: .25rem 0 0; color: #111; font-weight: 600; opacity: .9; }
.badge-line{ margin-top: 6px; }
.grade-badge{
  display: inline-block; padding: 6px 10px; border-radius: 9999px;
  font-weight: 700; font-size: 12px;
  background: #fff; color: #111;
  border: 1px solid rgba(0,0,0,.06); box-shadow: 0 1px 0 rgba(0,0,0,.04) inset;
}

/* =====================================================================
   6) Buttons
===================================================================== */
.ph-right{ display: flex; gap: 8px; flex: 0 0 auto; }
.btn{
  appearance: none;
  border: 1px solid rgba(0,0,0,.12);
  border-radius: 9999px;
  padding: 10px 16px;
  font-weight: 700; line-height: 1;
  cursor: pointer;
  background: #fff; color: #111;
  transition: transform .15s ease, box-shadow .15s ease, filter .15s ease, opacity .15s ease;
}
.btn:hover{ transform: translateY(-1px); box-shadow: 0 6px 16px rgba(0,0,0,.08); }
.btn[aria-busy="true"]{ opacity: .7; pointer-events: none; }
.btn.primary, .btn-primary{
  background: var(--accent); color: #111; border-color: transparent;
}
.btn.primary:hover, .btn-primary:hover{ filter: brightness(.98); transform: translateY(-1px); }
.btn.ghost{ background: #fff; color: #111; }
.btn.danger{
  background: #fef2f2;
  color: #b91c1c;
  border-color: rgba(220,38,38,.25);
}
.btn.danger:hover{
  background: #fee2e2;
  box-shadow: 0 6px 16px rgba(220,38,38,.18);
}
.btn.danger:active{
  transform: translateY(1px);
  box-shadow: none;
}
.btn.is-icon{
  width: 40px;
  height: 40px;
  padding: 0;
  display: grid;
  place-items: center;
  border-radius: 50%;
  line-height: 0;
}
.btn.is-icon .gh-icon{
  width: 16px;
  height: 16px;
  display: block;
}
.btn.is-icon .gh-icon{
  width: 18px;
  height: 18px;
}


/* --- Logout: 텍스트만 (아이콘 공간 제거) --- */
.btn-logout{
  appearance: none;
  display: inline-flex; align-items: center; justify-content: center; gap: 0; /* ← 0으로 고정 */
  min-width: 160px; padding: 12px 20px; line-height: 1;
  font-size: 15px; font-weight: 600; letter-spacing: .2px;
  border: 1px solid rgba(0,0,0,.14); border-radius: 9999px;
  background: #e9e9ec; color: #111; cursor: pointer;
  transition: background .18s ease, box-shadow .18s ease, transform .06s ease, color .18s ease, opacity .18s ease;
  box-shadow: 0 1px 2px rgba(0,0,0,.06);
}
.btn-logout:hover{ background: #dedee2; }
.btn-logout:focus{ outline: none; box-shadow: 0 0 0 3px rgba(255,167,101,.25); }
.btn-logout:active{ background: var(--accent); color:#111; transform: translateY(1px); }
.btn-logout[aria-busy="true"]{ background: var(--accent); color:#111; opacity: .95; pointer-events: none; }

/* ===================== */
/* Delete: 원형 버튼     */
/* ===================== */
.btn-delete{
  inline-size: 48px;
  block-size: 48px;
  aspect-ratio: 1 / 1;
  border-radius: 50%;
  padding: 0;

  display: inline-grid;
  place-items: center;

  position: relative;           /* why: ::before를 절대 중앙 정렬하기 위함 */
  background: #e9e9ec;
  color: #b91c1c;               /* 아이콘 컬러 */
  border: 1px solid rgba(0,0,0,.14);
  box-shadow: 0 1px 2px rgba(0,0,0,.06);
  cursor: pointer;
  transition: background .18s ease, transform .06s ease, opacity .18s ease, color .18s ease;
}

.btn-delete:hover{ background:#f3e7e7; }
.btn-delete:active{ background: #fee2e2; transform: translateY(1px); }
.btn-delete[aria-busy="true"]{ opacity:.6; pointer-events:none; }

/* 아이콘(마스크) — 중앙 정렬 보장 */
.btn-delete::before{
  content: "";
  display: block;
  inline-size: 22px;
  block-size: 22px;

  position: absolute;
  inset: 0;                     /* 상하좌우 0 */
  margin: auto;                 /* 박스를 정확히 중앙으로 */
  pointer-events: none;

  background-color: currentColor; }
  
/* =====================================================================
   Cards (shared): Collection / aud lab / Leaderboard 공용 스킨
   ※ KPI 스타일 제거와 무관하게 유지되어야 함
===================================================================== */
.panel{
  background: var(--panel);           
  border-radius: var(--panel-radius);
  padding: 16px;
  box-shadow: var(--shadow-soft);    
}
.panel h3{
  margin: 0 0 10px;
  font-size: 16px;
}

#admin-lab .card .btn { padding: 12px 18px; }
#admin-lab-msg{ margin-top: 8px; }

/* =====================================================================
   Leaderboard (ONLY) — 3 Columns Layout & Table Skin
   NOTE: 다른 섹션에는 영향 없음
===================================================================== */
/* 프로필 카드와 리더보드 사이 여백 */
.profile-hero + .insights{ margin-top: 20px; }
/* adminme.html 구조: section.insights > #lb-root > .panel* */
#lb-root{
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr)); /* 데스크탑: 3열 */
  gap: 16px;
  align-items: start;
}
@media (max-width: 1099px){
  #lb-root{ grid-template-columns: 1fr; }
}
/* 카드 스킨(패널 톤 일치) */
.insights #lb-root .panel{
  background: #fff;
  border-radius: 18px;
  padding: 16px;
  box-shadow: 0 1px 3px rgba(0,0,0,.05);
  display: grid;
  grid-template-rows: auto 1fr auto; /* why: 높이 균일 */
  min-height: 140px;
}
.insights #lb-root .panel h3{
  margin: 0 0 10px;
  font-size: 16px;
  font-weight: 700;
  letter-spacing: -.01em;
}

/* 리더보드 표 */
.lb-grid table.lb{
  width: 100%;
  border-collapse: collapse;
  table-layout: auto;
  background: #fff;
  border-radius: 12px;
  overflow: hidden;
}
.lb-grid table.lb th,
.lb-grid table.lb td{
  border-bottom: 1px solid rgba(0,0,0,.08);
  padding: 10px 12px;
  vertical-align: middle;
  text-align: center;
  font-size: 14px;
}
/* Rank, Account 좌정렬 */
.lb-grid table.lb th:nth-child(1),
.lb-grid table.lb td:nth-child(1),
.lb-grid table.lb th:nth-child(2){
  text-align: center;
}
.lb-grid table.lb td:nth-child(2){
  text-align: left;
}
/* Rank 고정폭 + 숫자 정렬 */
.lb-grid table.lb th:nth-child(1),
.lb-grid table.lb td:nth-child(1){
  width: 64px;
  font-variant-numeric: tabular-nums;
}
.lb-grid table.lb th:nth-child(2),
.lb-grid table.lb td:nth-child(2){
  width: auto;
}
.lb-grid table.lb th:last-child,
.lb-grid table.lb td:last-child{
  width: 64px;
  white-space: nowrap;   /* 줄바꿈 방지 */
  /* padding-right는 그대로 두면 테두리와 적당히 떨어짐 */
}
/* 숫자 열: 자간 고정 */
.lb-grid table.lb td:nth-child(3),
.lb-grid table.lb td:nth-child(4),
.lb-grid table.lb td:nth-child(5),
.lb-grid table.lb td:nth-child(6){
  white-space: nowrap;
  font-variant-numeric: tabular-nums;
}
.lb-grid table.lb tbody tr:last-child td{ border-bottom: 0; }

/* 계정 셀(아바타 + 텍스트) */
.lb-grid .acc{
  display: flex;
  align-items: center;
  gap: 10px;
  min-width: 0;
}
.lb-grid .lb-avatar{
  width: 22px; height: 22px; border-radius: 50%;
  object-fit: cover; display: block; flex: 0 0 22px;
}
.lb-grid .acc > div{ min-width: 0; display: grid; gap: 2px; }
.lb-grid .acc > div > div{
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}
.lb-grid .muted{ opacity: .65; font-size: 12px; }

/* 로딩/에러 자리표시자(선택) */
.lb-grid .kpi-lg{ display: grid; place-items: center; min-height: 56px; font-weight: 700; }
.lb-grid .err{ color: #ff6b6b; }

/* =====================================================================
   9) Quick Panels (컬렉션 요약 등)
===================================================================== */
/* === Quick 영역 === */
.quick{
  margin-top: 18px;
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 30px;
}

/* 왼쪽 첫 패널(= Collection) */
.quick .panel:first-child{
  display: grid;
  padding-block: 24px;  
}

/* 그리드 내용: 세로 가운데, 가로는 시작 정렬 */
.quick .panel:first-child .grid-2{
  display: grid;
  grid-template-columns: 1fr;  /* 한 컬럼 고정 */
  row-gap: 0;                  /* was 5px */
  column-gap: 0;
  align-content: start;
  justify-items: start;
}

/* 숫자(KPI) 바로 아래 리스트는 촘촘하게 */
.quick .panel:first-child .grid-2 .kpi + .quick-list{
  margin-top: 2px; /* was 6px */
}

/* 리스트 다음에 나오는 다음 KPI 사이는 조금 띄우기(두 구간 경계) */
.quick .panel:first-child .grid-2 .quick-list + .kpi{
  margin-top: 14px; /* was 18px */
}

.quick .panel:first-child .grid-2 > *{ width: 100%; }
.quick .panel:first-child .quick-list{ padding-inline: 13px; }
.quick .panel:first-child .quick-list__ul{ margin: 0; padding: 0; }

/* KPI: 숫자 왼쪽, 라벨 오른쪽, 기준선(아래) 맞춤 */
.quick .panel:first-child .kpi{
  display: flex;
  flex-direction: column;  /* 숫자 위, 라벨 아래 */
  align-items: flex-start;
  gap: 6px;
}
.quick .panel:first-child .kpi b{
  font-size: 20px;
  line-height: 1;
}
.quick .panel:first-child .kpi span{
  font-size: 12px;
  line-height: 1;
  color: #777;
}

/* 기본 그리드 / KPI (다른 패널 공통) */
.grid-2{
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 16px;
}
.kpi{
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: 6px;
}

/* 리스트 공통 */
.panel .list{
  list-style: none;
  margin: 0;
  padding: 0;
  display: grid;
  gap: 10px;
}
.panel .list li{
  display: flex;
  align-items: center;
  justify-content: space-between;
  font-size: 14px;
}
.panel .list li b{
  font-variant-numeric: tabular-nums;
  color: #333;
}
/* === Quick Lists (labels / jibbitz) === */
.quick-list{ margin-top: 12px; }

.quick-list__title{
  margin: 0 0 6px;
  font-size: 12px; font-weight: 800; letter-spacing: .04em;
  color: #555; text-transform: uppercase;
}

.quick-list__ul{
  list-style: none;
  display: flex; flex-wrap: wrap; align-items: center;
  gap: 6px 10px; /* 줄 바꿈 시 위아래도 살짝 간격 */
  margin: 0; padding: 0;
}

.quick-list__li{
  display: inline-flex; align-items: center;
}

/* 이걸로 교체 */
.quick-list__li:not(:last-child)::after{
  content: " |";
  opacity: .45;
  margin-left: 7px;
}

/* 링크 룩앤필 */
.quick-list__link{
  text-decoration: none;
  font-weight: 600; font-size: 13px;
  color: #111;
}
.quick-list__link:hover{ text-decoration: underline; }


/* =====================================================================
   11) PM Sheet
===================================================================== */
.pm.sheet{
  inline-size: min(100%, var(--sheet-w-max));
  margin-inline: auto;
  display: grid;
  grid-template-columns: minmax(var(--pm-left-min), var(--pm-left)) minmax(320px, var(--pm-right));
  gap: var(--pm-gutter);
  align-items: stretch;
}
.pm.sheet{ container-type: inline-size; }
@container (max-width: 980px){
  .pm.sheet{ grid-template-columns: 1fr; }
}
@media (max-width: 1000px){
  .pm.sheet{ grid-template-columns: 1fr; }
}
.pm .left{ min-inline-size: 0; }
.pm .right{
  min-inline-size: 0;
  position: relative;
  max-block-size: var(--pm-fixed-h);
  overflow: auto;
  background: #fff; border-radius: 16px;
}

/* =====================================================================
   12) Modal (편집 모달)
===================================================================== */
.modal{
  position: fixed; inset: 0;
  display: grid; place-items: center;
  padding: 20px;
  background: rgba(0,0,0,.0);
  pointer-events: none; opacity: 0;
  transition: opacity .18s ease, background .18s ease;
}
.modal.open{
  background: rgba(0,0,0,.36);
  pointer-events: auto; opacity: 1;
}
.modal .sheet{
  inline-size: min(560px, 92vw);
  background: #fff; border-radius: 20px;
  box-shadow: 0 20px 60px rgba(0,0,0,.22);
  padding: 18px 18px 16px;
  transform: translateY(8px);
  transition: transform .18s ease, opacity .18s ease;
  opacity: .98;
}
.modal.open .sheet{ transform: translateY(0); opacity: 1; }
.modal .overlay{ position: fixed; inset: 0; background: transparent; border: 0; cursor: default; }
.modal .title{ font-size: 20px; font-weight: 800; margin: 2px 4px 14px; }
.form-row{ display: grid; gap: 6px; margin: 10px 4px; }
.form-row > label{ font-size: 13px; font-weight: 700; color: #222; }
.form-row > input{
  appearance: none; background:#fff;
  border: 1px solid rgba(0,0,0,.14); border-radius: 12px;
  padding: 12px 14px; font-size: 14px;
}
.form-row > input:focus-visible{ outline: 2px solid var(--focus); border-color: transparent; }
.hint{ font-size: 12px; color: var(--muted); margin: 4px 4px 0; }
.fieldset{
  border: 1px solid rgba(0,0,0,.08); border-radius: 14px;
  padding: 8px 10px 12px; margin: 12px 4px 8px;
}
.fieldset > legend{ padding: 0 6px; font-size: 12px; font-weight: 800; color: #333; }
.actions{
  display: flex; gap: 8px; justify-content: flex-end; align-items: center;
  margin: 14px 4px 0;
}
.msg{ font-size: 13px; color: #FFA765; margin: 10px 4px 0; min-height: 1.2em; }
@media (prefers-reduced-motion: reduce){
  .modal, .modal .sheet{ transition: none; }
}

/* =====================================================================
   13) Responsive (global)
===================================================================== */
@media (max-width: 860px){
  .insights{ grid-template-columns: 1fr; }
  .quick{ grid-template-columns: 1fr; }
  .profile-hero{ flex-direction: column; align-items: flex-start; }
  .ph-right{ align-self: stretch; }
  .panel.notify .panel-head{ align-items:flex-start; }
}

/* =====================================================================
   14) Helpers
===================================================================== */
.sr-only{
  position: absolute !important; inline-size: 1px; block-size: 1px;
  padding: 0; margin: -1px; overflow: hidden;
  clip: rect(0, 0, 1px, 1px); white-space: nowrap; border: 0;
}

/* ===== Footer (compact) ===== */
.mine-footer{
  margin-top: 48px;
  padding: 24px 0 64px;
  border-top: 1px solid rgba(0,0,0,.06);
  background: transparent;
}

.mine-footer .footer-inner{
  max-width: var(--container-max, 1500px);
  padding: 0 var(--container-pad, 24px);
  margin: 0 auto;
  display: flex;
  justify-content: center;
  gap: 12px;                 /* 버튼 간격은 gap으로만 관리 */
}

/* 로그아웃 버튼: 폭 줄이기(푸터 범위 한정) */
.mine-footer .btn-logout{
  min-width: auto;           /* 고정폭 해제 */
  padding-inline: 18px;      /* 좌우 패딩 축소 */
  white-space: nowrap;       /* 한 줄 유지 */
}

/* === Avatar normalization (me) — 2025-09-22 === */
#me-avatar.avatar{ border-radius:50%; overflow:hidden; }
#me-avatar.avatar .avatar-img{ display:none; width:100%; height:100%; object-fit:cover; }
#me-avatar.avatar.url-mode .avatar-img{ display:block; }
#me-avatar.avatar.url-mode::before{ content:""; }

/* Lab layout next to Quick */
.lab-wrap{
  display: grid;
  grid-template-columns: 1fr min(640px, 55%);
  gap: 16px;
  align-items: stretch;
}
@media (max-width: 1000px){
  .lab-wrap{ grid-template-columns: 1fr; }
}

/* Lab panel */
.panel.lab{
  display: grid;
  /* 가운데(캔버스) 행이 패딩을 제외한 남은 높이를 모두 차지 */
  grid-template-rows: auto minmax(0,1fr) auto;
  gap: 10px;
  height: 450px;             /* 필요 시 조절 가능 (예: 420px, 48vh 등) */
  padding: 12px 14px;        /* ← 원하는 옆 패딩을 여기서 지정 */

}

.lab-head{
  display:flex; align-items:baseline; justify-content:space-between; gap:10px;
}
.lab-head h3{ font-size:16px; font-weight:700; }
.lab-stats{ color: var(--muted); font-size: 12px; }

/* 캔버스 래퍼: 그리드 남은 공간을 그대로 사용 */
.lab-canvas-wrap{
  position: relative;
  border-radius: 16px;
  background: #fff;
  box-shadow: inset 0 0 0 1px rgba(0,0,0,.05);
  overflow: hidden;
  /* 고정 높이 제거: 패널의 가운데 행(minmax(0,1fr))을 그대로 채운다 */
  height: auto;
  min-height: 0; /* 그리드 컨텍스트에서 콘텐츠가 넘치며 커지는 것 방지 */
}

#aud-canvas{
  display: block;
  width: 100%;
  height: 100%;          /* 래퍼 높이에 꼭 맞춤 */
  touch-action: none;    /* 그리기용 포인터 이벤트 */
  background: linear-gradient(180deg, #f8fafc, #eef2f7 50%, #e6ebf3);
}

.lab-controls{
  display:flex; align-items:center; gap:8px;
}
.lab-controls .spacer{ flex:1; }

.panel.lab .btn.primary{
  background: var(--accent);
  color: #111;
  border: none;
}
.panel.lab .btn[disabled]{ opacity:.5; cursor:not-allowed; }

/* High-contrast focus for a11y */
#aud-canvas:focus-visible{ outline: 3px solid var(--focus); outline-offset: 2px; }

/* ★ 넓은 화면(≥1001px, .quick이 2열일 때) → Collection: 세로 1열 + 넓은 간격 */
@media (min-width: 1001px){
  .quick > .panel:first-child{
    display: flex;
    flex-direction: column;
  }
  .quick > .panel:first-child .grid-3{
    display: flex !important;        /* grid → flex로 전환 */
    flex-direction: column;
    justify-content: flex-start;      /* ⬅ space-between 제거 */
    gap: 18px;                        /* 라인 사이 간격 */
    padding-block: 35px;              /* 위/아래 패딩 */
    min-height: 240px;                /* 너무 납작 방지(옵션) */
  }
  .quick > .panel:first-child .kpi{
    display: flex;
    align-items: baseline;
    justify-content: space-between;
    padding: 30px 14px;               /* 내부 여백 */
    background: transparent;
    gap: 15px;
  }
  .quick > .panel:first-child .kpi b{ font-size: 22px; }
  .quick > .panel:first-child .kpi span{ font-size: 13px; color: #777; }
}

/* ★ 좁은 화면(≤1000px, .quick이 세로 스택되는 순간부터) → Collection: 가로 3칸 */
@media (max-width: 1000px){
  .quick{
    grid-template-columns: 1fr;               /* 스택 */
  }
  .quick > .panel:first-child .grid-3{
    grid-template-columns: repeat(3, minmax(0, 1fr));
    column-gap: 20px;
    row-gap: 12px;
    justify-items: start;
  }
}

/* ===== admin aud-lab modal (full-page overlay) ===== */
/* file: public/css/adminme.css  (추가/교체) */

/* Base modal reset */
#admin-lab.modal{
  position: fixed;
  inset: 0;
  display: grid;
  place-items: center;
  /* 기본은 비활성 상태로 시작 */
  opacity: 0;
  visibility: hidden;
  pointer-events: none;                  /* ← 닫힌 동안 클릭 차단(자기 자신) */
  z-index: -1;                           /* ← 스택에서 빼둠 */
  transition: opacity .18s ease, visibility 0s linear .18s;
  background: transparent; 
}

/* 열렸을 때만 상단으로 끌어올리고 상호작용 활성화 */
#admin-lab.modal.open,
#admin-lab.modal[aria-hidden="false"]{
  opacity: 1;
  visibility: visible;
  pointer-events: auto;                  /* ← 클릭 허용 */
  z-index: 1000;
  transition: opacity .18s ease;
  background: transparent; 
}

/* overlay/button 레이어도 닫힌 동안은 반드시 비활성화 */
#admin-lab.modal:not(.open)[aria-hidden="true"] .overlay,
#admin-lab.modal:not(.open)[aria-hidden="true"] *{
  pointer-events: none !important;       /* ← “가려진 차일드”가 클릭 먹는 것 방지 */
}

/* 시트 및 오버레이 기본 */
#admin-lab .overlay{
  position: fixed; inset: 0;
  background: rgba(17,17,17,.35);
}
#admin-lab .sheet{
  position: relative;
  max-width: var(--sheet-w-max, 960px);
  width: min(96vw, var(--sheet-w-max, 960px));
  max-height: 92dvh;
  border-radius: 16px;
  background: var(--panel, #fff);
  box-shadow: var(--shadow-soft, 0 10px 30px rgba(0,0,0,.15));
  overflow: auto;
}


/* 나머지 카드/툴바 스타일 동일 */
#admin-lab .admin-toolbar { display:flex; align-items:center; gap:8px; margin:8px 0 14px; }
#admin-lab .admin-toolbar .spacer { flex:1; }
#admin-lab .nsbar { display:flex; flex-wrap:wrap; gap:6px; }
#admin-lab .nsbar .pill {
  padding:6px 10px; border-radius:999px; border:1px solid rgba(0,0,0,.08);
  background:#f5f6f8; cursor:pointer; font-size:13px; font-weight:600;
}
#admin-lab .nsbar .pill.active { background:#111; color:#fff; border-color:#111; }
#admin-lab .admin-grid {
  display:grid;
  grid-template-columns:repeat(auto-fill, minmax(260px,1fr));
  gap:12px;
  justify-items:center;
}
#admin-lab .card {
  position: relative;
  border:1px solid rgba(0,0,0,.08);
  border-radius:12px;
  padding:14px 16px 72px;
  background:#fff;
  width:260px;
  box-sizing: border-box;
  cursor: pointer;
}
#admin-lab .card img { width:100%; height:auto; border-radius:12px; display:block; background:#f3f4f6; }
#admin-lab .card .meta { margin-top:6px; font-size:12px; color:#6b7280; display:flex; justify-content:space-between; gap:8px; }
#admin-lab .empty { color:#9ca3af; padding:24px; text-align:center; border:1px dashed #e5e7eb; border-radius:12px; }

.row--spaced { margin-top:6px; gap:6px; }

/* Admin Lab card: inner spacing & readable layout */
#admin-lab .card {
  padding: 12px 14px 14px;
  row-gap: 10px;
}

#admin-lab .card .preview-wrap{
  position: relative;
  width: 100%;
  aspect-ratio: 1 / 1;
  border-radius: 12px;
  overflow: hidden;
  background: #f3f4f6;
  display: grid;
  place-items: center;
  margin-bottom: 12px;
}
#admin-lab .card .preview-wrap img {
  display: block;
  width: 100%;
  height: 100%;
  object-fit: cover;
}

#admin-lab .card .meta {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  margin: 0 0 12px;
  line-height: 1.3;
}

#admin-lab .card .meta .owner,
#admin-lab .card .meta .ns,
#admin-lab .card .meta .time {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

#admin-lab .card .card-footer{
  display:flex;
  justify-content:flex-end;
  align-items:center;
  padding: 8px 0 0;
}

#admin-lab .card .card-delete {
  margin: 0;
}

/* 터치 환경에서 조금 더 여유 */
@media (pointer: coarse) {
  #admin-lab .card { padding: 14px 16px 16px; }
  #admin-lab .card .row--spaced { gap: 14px; margin-top: 12px; }
  #admin-lab .card .btn { padding: 12px 18px; }
}

#admin-lab .card .preview{
  width: 100%;
  aspect-ratio: 1 / 1;          /* 정사각형 */
  background-size: cover;
  background-position: center;
  border-radius: 12px;
  background-color: #111;        /* 이미지 로드 전 배경 */
}

/* file: /public/css/me.css (또는 공용 CSS) */
/* [5] ADD — 영구 규칙: 모달 컨트롤은 항상 인터랙션 가능 */
#admin-lab.modal .sheet,
#admin-lab.modal .admin-toolbar,
#admin-lab.modal .btn,
#admin-lab.modal button,
#admin-lab.modal [role="button"] {
  pointer-events: auto !important; /* why: 전역 reset/오버레이 규칙으로 none 되는 것 차단 */
}
